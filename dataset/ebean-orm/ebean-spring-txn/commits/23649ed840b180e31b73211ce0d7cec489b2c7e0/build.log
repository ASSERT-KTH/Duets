[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] --- tiles-maven-plugin: Injecting 1 tiles as intermediary parent artifacts for io.ebean:ebean-spring-txn...
[INFO] Mixed 'io.ebean:ebean-spring-txn:12.2.2-SNAPSHOT' with tile 'io.ebean.tile:enhancement:12.2.1' as its new parent.
[INFO] Mixed 'io.ebean.tile:enhancement:12.2.1' with original parent 'org.avaje:java8-oss:2.1' as its new top level parent.
[INFO] 
[INFO] Inspecting build with total of 1 modules...
[INFO] Installing Nexus Staging features:
[INFO]   ... total of 1 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin
[INFO] 
[INFO] ---------------------< io.ebean:ebean-spring-txn >----------------------
[INFO] Building ebean-spring-txn 12.2.2-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:prepare-agent (default) @ ebean-spring-txn ---
[INFO] argLine set to -javaagent:/home/jdbl/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar=destfile=/tmp/tmpnrgpkq0q/ebean-spring-txn/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ ebean-spring-txn ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /tmp/tmpnrgpkq0q/ebean-spring-txn/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ ebean-spring-txn ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to /tmp/tmpnrgpkq0q/ebean-spring-txn/target/classes
[INFO] 
[INFO] --- ebean-maven-plugin:12.2.1:enhance (main) @ ebean-spring-txn ---
[INFO] classSource=/tmp/tmpnrgpkq0q/ebean-spring-txn/target/classes  transformArgs=debug=0
[INFO] packages entity:[]  transactional:[]  querybean:[]  profileLocation:true
[INFO] loaded resources: []
[INFO]      Entities (0)  pkgs[] beans[]
[INFO]    QueryBeans (0)  pkgs[] beans[]
[INFO] Transactional (0)  pkgs[] beans[]
[INFO] Query Callers (0)  pkgs[] beans[]
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ ebean-spring-txn ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ ebean-spring-txn ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 7 source files to /tmp/tmpnrgpkq0q/ebean-spring-txn/target/test-classes
[INFO] 
[INFO] --- ebean-maven-plugin:12.2.1:testEnhance (test) @ ebean-spring-txn ---
[INFO] classSource=/tmp/tmpnrgpkq0q/ebean-spring-txn/target/test-classes  transformArgs=debug=0
[INFO] packages entity:[]  transactional:[]  querybean:[]  profileLocation:true
[INFO] loaded resources: []
[INFO]      Entities (3)  pkgs[org/example] beans[Account, Role, User]
[INFO]    QueryBeans (0)  pkgs[] beans[]
[INFO] Transactional (0)  pkgs[] beans[]
[INFO] Query Callers (0)  pkgs[] beans[]
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ ebean-spring-txn ---
[INFO] Surefire report directory: /tmp/tmpnrgpkq0q/ebean-spring-txn/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.example.EbeanSpringModuleTest
08:57:08.659 [main] INFO  o.s.t.c.s.DefaultTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener]
08:57:08.673 [main] INFO  o.s.t.c.s.DefaultTestContextBootstrapper - Could not instantiate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener]. Specify custom listener classes or make the default listener classes (and their required dependencies) available. Offending class: [javax/servlet/ServletContext]
08:57:08.691 [main] INFO  o.s.t.c.s.DefaultTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5624657a, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@36681447, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4d21c56e, org.springframework.test.context.transaction.TransactionalTestExecutionListener@726aa968, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7100dea, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@712cfb63, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@32e54a9d]
08:57:08.841 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [init-database.xml]
08:57:08.921 [main] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [default-ebean-server.xml]
08:57:08.989 [main] INFO  o.s.c.s.GenericApplicationContext - Refreshing org.springframework.context.support.GenericApplicationContext@136965e3: startup date [Fri Jul 31 08:57:08 UTC 2020]; root of context hierarchy
08:57:09.505 [main] INFO  io.ebean.EbeanVersion - ebean version: 12.2.1
08:57:09.559 [main] INFO  io.avaje.config.load.LoadContext - loaded properties from []
08:57:09.575 [main] WARN  io.ebean.internal.DefaultContainer - DataSource [test] has autoCommit defaulting to true!
08:57:09.619 [main] INFO  io.ebean.internal.DefaultContainer - DatabasePlatform name:test platform:h2
08:57:10.036 [main] INFO  i.e.s.core.InternalConfiguration - Using Transaction Manager [class io.ebean.spring.txn.SpringJdbcTransactionManager]
08:57:10.154 [main] INFO  io.ebean.DDL - Executing test-drop-all.sql - 14 statements, autoCommit:true
08:57:10.154 [main] DEBUG io.ebean.DDL - executing 1 of 14 alter table account drop constraint if exists fk_account_user_oid
08:57:10.162 [main] DEBUG io.ebean.DDL -  ... ignoring error executing alter table account drop constraint if exists fk_account_user_oid  error: Table "ACCOUNT" not found; SQL statement:
alter table account drop constraint if exists fk_account_user_oid [42102-196]
08:57:10.163 [main] DEBUG io.ebean.DDL - executing 2 of 14 alter table role_user drop constraint if exists fk_role_user_role
08:57:10.163 [main] DEBUG io.ebean.DDL -  ... ignoring error executing alter table role_user drop constraint if exists fk_role_user_role  error: Table "ROLE_USER" not found; SQL statement:
alter table role_user drop constraint if exists fk_role_user_role [42102-196]
08:57:10.163 [main] DEBUG io.ebean.DDL - executing 3 of 14 drop index if exists ix_role_user_role
08:57:10.163 [main] DEBUG io.ebean.DDL - executing 4 of 14 alter table role_user drop constraint if exists fk_role_user_user
08:57:10.163 [main] DEBUG io.ebean.DDL -  ... ignoring error executing alter table role_user drop constraint if exists fk_role_user_user  error: Table "ROLE_USER" not found; SQL statement:
alter table role_user drop constraint if exists fk_role_user_user [42102-196]
08:57:10.163 [main] DEBUG io.ebean.DDL - executing 5 of 14 drop index if exists ix_role_user_user
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 6 of 14 alter table user_role drop constraint if exists fk_user_role_user
08:57:10.164 [main] DEBUG io.ebean.DDL -  ... ignoring error executing alter table user_role drop constraint if exists fk_user_role_user  error: Table "USER_ROLE" not found; SQL statement:
alter table user_role drop constraint if exists fk_user_role_user [42102-196]
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 7 of 14 drop index if exists ix_user_role_user
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 8 of 14 alter table user_role drop constraint if exists fk_user_role_role
08:57:10.164 [main] DEBUG io.ebean.DDL -  ... ignoring error executing alter table user_role drop constraint if exists fk_user_role_role  error: Table "USER_ROLE" not found; SQL statement:
alter table user_role drop constraint if exists fk_user_role_role [42102-196]
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 9 of 14 drop index if exists ix_user_role_role
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 10 of 14 drop table if exists account
08:57:10.164 [main] DEBUG io.ebean.DDL - executing 11 of 14 drop table if exists role
08:57:10.165 [main] DEBUG io.ebean.DDL - executing 12 of 14 drop table if exists role_user
08:57:10.165 [main] DEBUG io.ebean.DDL - executing 13 of 14 drop table if exists user
08:57:10.165 [main] DEBUG io.ebean.DDL - executing 14 of 14 drop table if exists user_role
08:57:10.166 [main] INFO  io.ebean.DDL - Executing test-create-all.sql - 14 statements, autoCommit:false
08:57:10.166 [main] DEBUG io.ebean.DDL - executing 1 of 14 create table account (   id                            bigint generated by defau...
08:57:10.196 [main] DEBUG io.ebean.DDL - executing 2 of 14 create table role (   id                            bigint generated by default...
08:57:10.198 [main] DEBUG io.ebean.DDL - executing 3 of 14 create table role_user (   role_id                       bigint not null,   user...
08:57:10.199 [main] DEBUG io.ebean.DDL - executing 4 of 14 create table user (   oid                           bigint generated by default...
08:57:10.200 [main] DEBUG io.ebean.DDL - executing 5 of 14 create table user_role (   user_oid                      bigint not null,   role...
08:57:10.201 [main] DEBUG io.ebean.DDL - executing 6 of 14 alter table account add constraint fk_account_user_oid foreign key (user_oid) re...
08:57:10.217 [main] DEBUG io.ebean.DDL - executing 7 of 14 create index ix_role_user_role on role_user (role_id)
08:57:10.218 [main] DEBUG io.ebean.DDL - executing 8 of 14 alter table role_user add constraint fk_role_user_role foreign key (role_id) ref...
08:57:10.219 [main] DEBUG io.ebean.DDL - executing 9 of 14 create index ix_role_user_user on role_user (user_oid)
08:57:10.220 [main] DEBUG io.ebean.DDL - executing 10 of 14 alter table role_user add constraint fk_role_user_user foreign key (user_oid) re...
08:57:10.221 [main] DEBUG io.ebean.DDL - executing 11 of 14 create index ix_user_role_user on user_role (user_oid)
08:57:10.222 [main] DEBUG io.ebean.DDL - executing 12 of 14 alter table user_role add constraint fk_user_role_user foreign key (user_oid) re...
08:57:10.223 [main] DEBUG io.ebean.DDL - executing 13 of 14 create index ix_user_role_role on user_role (role_id)
08:57:10.223 [main] DEBUG io.ebean.DDL - executing 14 of 14 alter table user_role add constraint fk_user_role_role foreign key (role_id) ref...
08:57:10.307 [main] INFO  org.example.EbeanSpringModuleTest - Saving new User...
08:57:10.338 [main] DEBUG io.ebean.SQL - txn[s1623046678] insert into user (name) values (?); -- bind(ebean)
08:57:10.350 [main] DEBUG io.ebean.SUM - txn[s1623046678] Inserted [User] [1]
08:57:10.351 [main] DEBUG io.ebean.TXN - txn[s1623046678] Commit
08:57:10.354 [main] INFO  org.example.EbeanSpringModuleTest - Saved new User
---------before batch-------
08:57:10.365 [main] DEBUG io.ebean.SUM - txn[s1228117293] BatchControl flush [User:0 i:25]
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293] insert into user (name) values (?)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user0)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user1)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user2)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user3)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user4)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user5)
08:57:10.367 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user6)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user7)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user8)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user9)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user10)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user11)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user12)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user13)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user14)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user15)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user16)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user17)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user18)
08:57:10.368 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user19)
08:57:10.375 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [2]
08:57:10.375 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [3]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [4]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [5]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [6]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [7]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [8]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [9]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [10]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [11]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [12]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [13]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [14]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [15]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [16]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [17]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [18]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [19]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [20]
08:57:10.376 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [21]
08:57:10.376 [main] DEBUG io.ebean.SQL - txn[s1228117293] insert into user (name) values (?)
08:57:10.376 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user20)
08:57:10.377 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user21)
08:57:10.377 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user22)
08:57:10.377 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user23)
08:57:10.377 [main] DEBUG io.ebean.SQL - txn[s1228117293]  -- bind(user24)
08:57:10.378 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [22]
08:57:10.378 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [23]
08:57:10.378 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [24]
08:57:10.378 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [25]
08:57:10.378 [main] DEBUG io.ebean.SUM - txn[s1228117293] Inserted [User] [26]
---------after batch-------
08:57:10.379 [main] DEBUG io.ebean.TXN - txn[s1228117293] Commit
08:57:10.390 [main] INFO  org.example.EbeanSpringModuleTest - nonTransactional done
08:57:10.402 [main] INFO  org.example.EbeanSpringModuleTest - Finding User with OID = 1 ...
08:57:10.440 [main] DEBUG io.ebean.SQL - txn[s749295648] select t0.oid, t0.name, t1.id from user t0 left join account t1 on t1.user_oid = t0.oid  where t0.oid = ?  ; --bind(1, )
08:57:10.445 [main] DEBUG io.ebean.SUM - txn[s749295648] FindBean type[User] origin[CJfs2t.A.A] exeMicros[7885] rows[1] bind[1, ]
08:57:10.446 [main] DEBUG io.ebean.TXN - txn[s749295648] Commit
08:57:10.446 [main] INFO  org.example.EbeanSpringModuleTest - Found User with OID = 1
08:57:10.450 [main] INFO  org.example.EbeanSpringModuleTest - Finding User with OID = 1 ...
08:57:10.451 [main] DEBUG io.ebean.SQL - txn[s599380819] select t0.oid, t0.name, t1.id from user t0 left join account t1 on t1.user_oid = t0.oid  where t0.oid = ?  ; --bind(1, )
08:57:10.451 [main] DEBUG io.ebean.SUM - txn[s599380819] FindBean type[User] origin[CJfs2t.A.A] exeMicros[979] rows[1] bind[1, ]
08:57:10.451 [main] DEBUG io.ebean.TXN - txn[s599380819] Commit
08:57:10.452 [main] DEBUG io.ebean.SQL - txn[1001] select t0.oid, t0.name, t1.id from user t0 left join account t1 on t1.user_oid = t0.oid  where t0.oid = ?  ; --bind(2, )
08:57:10.453 [main] DEBUG io.ebean.SUM - txn[1001] FindBean type[User] origin[CJfs2t.A.A] exeMicros[835] rows[1] bind[2, ]
08:57:10.453 [main] INFO  org.example.EbeanSpringModuleTest - nonTransactional find user1:{user:1 name:ebean} user2:{user:2 name:user0}
08:57:10.458 [main] TRACE io.ebean.TXN - txn[1002] Begin
08:57:10.458 [main] DEBUG io.ebean.SQL - txn[1002] insert into user (name) values (?); -- bind(save with txn 1)
08:57:10.459 [main] DEBUG io.ebean.SUM - txn[1002] Inserted [User] [27]
08:57:10.459 [main] DEBUG io.ebean.TXN - txn[1002] Commit
08:57:10.494 [main] DEBUG io.ebean.SUM - txn[1003] -- Deleting intersection table entries: org.example.User.roles
08:57:10.498 [main] DEBUG io.ebean.SQL - txn[1003] delete from user_role where user_oid=? ; -- bind(27) rows(0)
08:57:10.499 [main] DEBUG io.ebean.SUM - txn[1003] -- Deleting User Id: 27
08:57:10.501 [main] DEBUG io.ebean.SQL - txn[1003] delete from user where oid = ? ; -- bind(27) rows(1)
08:57:10.501 [main] DEBUG io.ebean.TXN - txn[1003] Commit
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.252 sec - in org.example.EbeanSpringModuleTest
08:57:10.507 [Thread-3] INFO  o.s.c.s.GenericApplicationContext - Closing org.springframework.context.support.GenericApplicationContext@136965e3: startup date [Fri Jul 31 08:57:08 UTC 2020]; root of context hierarchy

Results :

Tests run: 6, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:report (report) @ ebean-spring-txn ---
[INFO] Loading execution data file /tmp/tmpnrgpkq0q/ebean-spring-txn/target/jacoco.exec
[INFO] Analyzed bundle 'ebean-spring-txn' with 742 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:36 min
[INFO] Finished at: 2020-07-31T08:57:12Z
[INFO] ------------------------------------------------------------------------
