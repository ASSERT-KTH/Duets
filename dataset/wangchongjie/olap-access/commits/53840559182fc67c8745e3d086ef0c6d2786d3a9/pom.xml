<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
 	<modelVersion>4.0.0</modelVersion>
 	<groupId>com.baidu.unbiz</groupId>
  	<artifactId>olap-access</artifactId>
  	<version>1.0.16-SNAPSHOT</version>
	<packaging>jar</packaging>
	<name>olap-access</name>
	<url>http://maven.apache.org</url>
	<properties>
        <olap-access.sdk.name>olap-access-sdk</olap-access.sdk.name>
		<source.version>1.6</source.version>
		<target.version>1.6</target.version>
		<spring.version>3.1.2.RELEASE</spring.version>
		<encoding>UTF-8</encoding>
		
		<!-- Baidu repositories -->
		<baidu.local.repository>http://maven.scm.baidu.com:8081/nexus/content/groups/public</baidu.local.repository>
		<baidu.deploy.repository.id>Baidu_Local</baidu.deploy.repository.id>
		<baidu.deploy.repository.url>http://maven.scm.baidu.com:8081/nexus/content/repositories/Baidu_Local/</baidu.deploy.repository.url>
	</properties>

	<repositories>
		<repository>
			<id>baidu_public_repo</id>
			<name>Baidu's repository</name>
			<url>${baidu.local.repository}</url>
			<snapshots>
				<enabled>true</enabled>
			</snapshots>
		</repository>
	</repositories>
	<pluginRepositories>
		<pluginRepository>
			<id>baidu_plugin_repo</id>
			<name>Baidu's plugin repository</name>
			<url>${baidu.local.repository}</url>
			<snapshots>
				<enabled>true</enabled>
			</snapshots>
		</pluginRepository>
	</pluginRepositories>
	<dependencies>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-jdbc</artifactId>
			<version>${spring.version}</version>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-test</artifactId>
			<version>${spring.version}</version>
			<scope>test</scope>
		</dependency>
		<!-- logbback-->  
        <dependency>  
            <groupId>ch.qos.logback</groupId>  
            <artifactId>logback-core</artifactId>  
            <version>1.0.0</version>  
            <scope>compile</scope>  
        </dependency>  
        <dependency>  
            <groupId>ch.qos.logback</groupId>  
            <artifactId>logback-classic</artifactId>  
            <version>1.0.0</version>  
            <scope>compile</scope>  
        </dependency>
		<dependency>
			<groupId>mysql</groupId>
			<artifactId>mysql-connector-java</artifactId>
			<version>5.1.6</version>
		</dependency>
		<!--  
		<dependency>
			<groupId>c3p0</groupId>
			<artifactId>c3p0</artifactId>
			<version>0.9.1.2</version>
		</dependency>
		-->
		<dependency>
		  <groupId>commons-dbcp</groupId>
		  <artifactId>commons-dbcp</artifactId>
		  <version>1.4</version>
		</dependency>
		<dependency>
		  <groupId>commons-pool</groupId>
		  <artifactId>commons-pool</artifactId>
		  <version>1.6</version>
		</dependency>
		<dependency>
			<groupId>com.mchange</groupId>
			<artifactId>c3p0</artifactId>
			<version>0.9.5-pre8</version>
		</dependency>
		<dependency>
			<groupId>javassist</groupId>
			<artifactId>javassist</artifactId>
			<version>3.9.0.GA</version>
		</dependency>
		<dependency>
			<groupId>commons-logging</groupId>
			<artifactId>commons-logging</artifactId>
			<version>1.0.4</version>
		</dependency>
		<dependency>
			<groupId>commons-logging</groupId>
			<artifactId>commons-logging-api</artifactId>
			<version>1.0.4</version>
		</dependency>
		<dependency>
			<groupId>commons-lang</groupId>
			<artifactId>commons-lang</artifactId>
			<version>2.4</version>
		</dependency>
		<dependency>
			<groupId>commons-collections</groupId>
			<artifactId>commons-collections</artifactId>
			<version>3.2</version>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>4.8.1</version>
			<scope>test</scope>
		</dependency>
	</dependencies>
	<distributionManagement>
		<repository>
			<id>${baidu.deploy.repository.id}</id>
			<name>scm's Releases</name>
			<url>${baidu.deploy.repository.url}</url>
		</repository>
		<snapshotRepository>
			<id>Baidu_Local_Snapshots</id>
			<name>scm's snapshot  Releases</name>
			<url>http://maven.scm.baidu.com:8081/nexus/content/repositories/Baidu_Local_Snapshots/</url>
		</snapshotRepository>
	</distributionManagement>
	<build>
		<defaultGoal>package</defaultGoal>
		<finalName>${project.artifactId}</finalName>
		<outputDirectory>target/classes</outputDirectory>
		
		<pluginManagement>
			<plugins>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-compiler-plugin</artifactId>
					<version>2.3.1</version>
					<configuration>
						<source>${source.version}</source>
						<target>${target.version}</target>
						<encoding>${encoding}</encoding>
						<failOnError>true</failOnError>
						<showDeprecation>true</showDeprecation>
						<showWarnings>true</showWarnings>
						<compilerArguments>
                     		<verbose />
                      		<bootclasspath>${java.home}/lib/rt.jar</bootclasspath>
                		</compilerArguments> 
					</configuration>

					<dependencies>
						<dependency>
							<groupId>org.codehaus.plexus</groupId>
							<artifactId>plexus-compiler-javac</artifactId>
							<version>1.8.1</version>
						</dependency>
					</dependencies>
				</plugin>

				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-jar-plugin</artifactId>
					<version>2.4</version>
				    <configuration>
						<excludes>
							<exclude>*.properties</exclude>
							<exclude>**/*.*.properties</exclude>
							<exclude>applicationContext-olap.xml</exclude>
						</excludes>
					</configuration>
					<executions>
						<execution>
	                        <id>make-jar</id>
	                        <phase>package</phase>
	                        <goals>
	                            <goal>jar</goal>
	                        </goals>
	                        <configuration>
								<excludes>
									<exclude>*.properties</exclude>
									<exclude>**/*.*.properties</exclude>
									<exclude>applicationContext-olap.xml</exclude>
								</excludes>
							</configuration>
	                    </execution>
	                    <execution>
	                        <id>make-sdk-jar</id>
	                        <phase>package</phase>
	                        <goals>
	                            <goal>jar</goal>
	                        </goals>
	                       <configuration>
								<finalName>${olap-access.sdk.name}</finalName>
								<includes>
									<include>**/vo/*</include>
									<include>**/bo/*</include>
									<include>**/obj/*</include>
									<include>**/annotation/*</include>
									<include>**/SortOrder.class</include>
									<include>**/MethodPair.class</include>
								</includes>
							</configuration>
	                    </execution>
					</executions>
				</plugin>
				
				<plugin>
	                <groupId>org.apache.maven.plugins</groupId>
	                <artifactId>maven-source-plugin</artifactId>
	                <version>2.3</version>
	                <executions>
	                    <execution>
	                        <id>attach-sources</id>
	                        <goals>
	                            <goal>jar</goal>
	                        </goals>
	                    </execution>
	                </executions>
	            </plugin>
	            
	        <!-- override maven-install-plugin -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-install</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>install olap-access</id>
                        <phase>install</phase>
                        <goals>
                            <goal>install-file</goal>
                        </goals>
                        <configuration>
                            <finalName>olap-access</finalName>
                            <file>${project.build.directory}/olap-access.jar</file>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>olap-access</artifactId>
                            <version>${project.version}</version>
                            <packaging>jar</packaging>
                        </configuration>
                    </execution>
                    <execution>
                        <id>install sdk olap-access</id>
                        <phase>install</phase>
                        <goals>
                            <goal>install-file</goal>
                        </goals>
                        <configuration>
                            <finalName>${olap-access.sdk.name}</finalName>
                            <file>${project.build.directory}/${olap-access.sdk.name}.jar</file>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>${olap-access.sdk.name}</artifactId>
                            <version>${project.version}</version>
                            <packaging>jar</packaging>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <!-- override maven-deploy-plugin -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-deploy-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-deploy</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>deploy olap-access</id>
                        <phase>deploy</phase>
                        <goals>
                            <goal>deploy-file</goal>
                        </goals>
                        <configuration>
                            <!--=============================================================================== -->
                            <!-- WARN: Switch the config when dealing with maven's main repo and 
                                snapshot rep -->
                            <!--=============================================================================== -->
                            <!-- 
                            <repositoryId>${baidu.deploy.repository.id}</repositoryId> <url>${baidu.deploy.repository.url}</url> 
                                <file>${project.build.directory}/olap-access.jar</file>
                            -->
							
                            <repositoryId>Baidu_Local_Snapshots</repositoryId>
                            <url>http://maven.scm.baidu.com:8081/nexus/content/repositories/Baidu_Local_Snapshots</url>
                            <file>${project.build.directory}/olap-access.jar</file>
							
                            <groupId>${project.groupId}</groupId>
                            <artifactId>olap-access</artifactId>
                            <version>${project.version}</version>
                            <packaging>jar</packaging>

                            <retryFailedDeploymentCount>3</retryFailedDeploymentCount>
                        </configuration>
                    </execution>
                    <execution>
                        <id>deploy sdk olap-access</id>
                        <phase>deploy</phase>
                        <goals>
                            <goal>deploy-file</goal>
                        </goals>
                        <configuration>
                            <!--=============================================================================== -->
                            <!-- WARN: Switch the config when dealing with maven's main repo and 
                                snapshot rep -->
                            <!--=============================================================================== -->
                            <!--  
                            <repositoryId>${baidu.deploy.repository.id}</repositoryId> <url>${baidu.deploy.repository.url}</url> 
                                <file>${project.build.directory}/${olap-access.sdk.name}.jar</file> 
							-->
                            <repositoryId>Baidu_Local_Snapshots</repositoryId>
                            <url>http://maven.scm.baidu.com:8081/nexus/content/repositories/Baidu_Local_Snapshots</url>
                            <file>${project.build.directory}/${olap-access.sdk.name}.jar</file>

                            <groupId>${project.groupId}</groupId>
                            <artifactId>${olap-access.sdk.name}</artifactId>
                            <version>${project.version}</version>
                            <packaging>jar</packaging>

                            <retryFailedDeploymentCount>3</retryFailedDeploymentCount>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
	            
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-war-plugin</artifactId>
					<version>2.1.1</version>
					<configuration>
						<webXml>${project.basedir}/src/main/webapp/WEB-INF/web.xml</webXml>
					</configuration>
				</plugin>

				<!-- embedded web servers -->
				<plugin>
					<groupId>org.mortbay.jetty</groupId>
					<artifactId>maven-jetty-plugin</artifactId>
					<version>6.1.10</version>
				</plugin>

				<plugin>
					<groupId>org.apache.tomcat.maven</groupId>
					<artifactId>tomcat6-maven-plugin</artifactId>
					<version>2.0</version>
				</plugin>

				<!-- auto deploy plugin -->
				<plugin>
					<groupId>org.codehaus.cargo</groupId>
					<artifactId>cargo-maven2-plugin</artifactId>
					<version>1.2.0</version>
				</plugin>

			</plugins>
		</pluginManagement>
	</build>
</project>
