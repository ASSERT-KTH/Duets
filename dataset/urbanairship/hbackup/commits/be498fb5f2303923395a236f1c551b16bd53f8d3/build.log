[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< com.urbanairship:hbackup >----------------------
[INFO] Building hbackup 0.10.2-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:prepare-agent (default) @ hbackup ---
[INFO] argLine set to -javaagent:/home/jdbl/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar=destfile=/tmp/tmpy9jfrld9/hbackup/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ hbackup ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /tmp/tmpy9jfrld9/hbackup/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hbackup ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 36 source files to /tmp/tmpy9jfrld9/hbackup/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ hbackup ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hbackup ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 8 source files to /tmp/tmpy9jfrld9/hbackup/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ hbackup ---
[INFO] Surefire report directory: /tmp/tmpy9jfrld9/hbackup/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.urbanairship.hbackup.StalenessCheckerTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.021 sec - in com.urbanairship.hbackup.StalenessCheckerTest
Running com.urbanairship.hbackup.S3Test
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.001 sec - in com.urbanairship.hbackup.S3Test
Running com.urbanairship.hbackup.BackupServiceTest
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
2020-07-30 23:13:35,144 - INFO  [pool-1-thread-1:StaleCheckScheduled@77] - Starting up....
2020-07-30 23:13:35,149 - INFO  [pool-1-thread-1:StaleCheckScheduled@58] - Checking staleness.
2020-07-30 23:13:35,151 - DEBUG [pool-1-thread-1:StalenessCheck@43] - Enqueueing staleness check for file /testStuff.dat
2020-07-30 23:13:35,152 - DEBUG [pool-2-thread-1:FileMtimeComparer@40] - Got source mtime 1596150814992 for file /testStuff.dat
2020-07-30 23:13:35,152 - DEBUG [pool-2-thread-1:FileMtimeComparer@48] - Got sink mtime 1596064413992 for file /testStuff.dat
2020-07-30 23:13:35,152 - INFO  [pool-2-thread-1:FileMtimeComparer@51] - File is stale: /testStuff.dat
2020-07-30 23:13:35,152 - INFO  [pool-1-thread-1:StalenessCheck@53] - Up to date files: 0
2020-07-30 23:13:35,152 - INFO  [pool-1-thread-1:StalenessCheck@54] - Stale files: 1
2020-07-30 23:13:35,153 - INFO  [pool-1-thread-1:StalenessCheck@55] - Files that couldn't be checked: 0
2020-07-30 23:13:35,153 - WARN  [pool-1-thread-1:StalenessCheck@61] - Returning non-zero. Either there were errors or something was stale.
2020-07-30 23:13:35,154 - INFO  [pool-1-thread-1:StaleCheckScheduled@83] - Waiting for check thread to exit
2020-07-30 23:13:35,154 - INFO  [pool-1-thread-1:StaleCheckScheduled@88] - Stopped.
2020-07-30 23:13:35,156 - INFO  [pool-3-thread-1:StaleCheckScheduled@77] - Starting up....
2020-07-30 23:13:35,156 - INFO  [pool-3-thread-1:StaleCheckScheduled@58] - Checking staleness.
2020-07-30 23:13:35,157 - DEBUG [pool-3-thread-1:StalenessCheck@43] - Enqueueing staleness check for file /testStuff.dat
2020-07-30 23:13:35,157 - DEBUG [pool-4-thread-1:FileMtimeComparer@40] - Got source mtime 1596150815155 for file /testStuff.dat
2020-07-30 23:13:35,160 - DEBUG [pool-4-thread-1:FileMtimeComparer@48] - Got sink mtime 1596237216155 for file /testStuff.dat
2020-07-30 23:13:35,160 - INFO  [pool-4-thread-1:FileMtimeComparer@54] - File is up to date (not stale): /testStuff.dat
2020-07-30 23:13:35,160 - INFO  [pool-3-thread-1:StalenessCheck@53] - Up to date files: 1
2020-07-30 23:13:35,161 - INFO  [pool-3-thread-1:StalenessCheck@54] - Stale files: 0
2020-07-30 23:13:35,161 - INFO  [pool-3-thread-1:StalenessCheck@55] - Files that couldn't be checked: 0
2020-07-30 23:13:35,161 - DEBUG [pool-3-thread-1:StalenessCheck@58] - Returning zero since all files were up-to-date.
2020-07-30 23:13:36,156 - INFO  [pool-3-thread-1:StaleCheckScheduled@83] - Waiting for check thread to exit
2020-07-30 23:13:36,157 - INFO  [pool-3-thread-1:StaleCheckScheduled@88] - Stopped.
2020-07-30 23:13:36,162 - INFO  [pool-5-thread-1:HBackupScheduled@68] - Starting up....
2020-07-30 23:13:36,163 - INFO  [pool-5-thread-1:HBackupScheduled@75] - Stopped.
Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.216 sec <<< FAILURE! - in com.urbanairship.hbackup.BackupServiceTest
backupTest(com.urbanairship.hbackup.BackupServiceTest)  Time elapsed: 0.01 sec  <<< FAILURE!
java.lang.AssertionError: expected:<1> but was:<0>
	at com.urbanairship.hbackup.BackupServiceTest.backupTest(BackupServiceTest.java:60)

Running com.urbanairship.hbackup.XorStreamTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec - in com.urbanairship.hbackup.XorStreamTest
Running com.urbanairship.hbackup.ChecksumVerifierTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0 sec - in com.urbanairship.hbackup.ChecksumVerifierTest
Running com.urbanairship.hbackup.HdfsTest
Starting DataNode 0 with dfs.data.dir: build/test/data/dfs/data/data1,build/test/data/dfs/data/data2
Starting DataNode 0 with dfs.data.dir: build/test/data/dfs/data/data1,build/test/data/dfs/data/data2
2020-07-30 23:13:40,615 - DEBUG [main:HBackup@75] - Not configured for input path pattern matching, skipping
2020-07-30 23:13:40,622 - DEBUG [main:HdfsSink@77] - Sink file /copydest/myfile.txt didn't exist for source file myfile.txt. Will re-upload.
2020-07-30 23:13:40,630 - DEBUG [main:HBackup@102] - Queueing file for transfer: myfile.txt
2020-07-30 23:13:40,705 - DEBUG [pool-11-thread-1:HdfsSink$1@122] - Done transferring file to HDFS: myfile.txt
2020-07-30 23:13:40,706 - DEBUG [pool-11-thread-1:HdfsSink$1@141] - Commit noop for HDFS, nothing to do to commit to HDFS
2020-07-30 23:13:40,706 - INFO  [main:HBackup@119] - Files copied:      1
2020-07-30 23:13:40,706 - INFO  [main:HBackup@120] - Files skipped:     0
2020-07-30 23:13:40,706 - INFO  [main:HBackup@121] - Files failed:      0
2020-07-30 23:13:40,706 - INFO  [main:HBackup@122] - Chunks copied:     1
2020-07-30 23:13:40,706 - INFO  [main:HBackup@123] - Chunks failed:     0
2020-07-30 23:13:40,706 - INFO  [main:HBackup@124] - Checksums saved:   0
2020-07-30 23:13:40,706 - INFO  [main:HBackup@125] - Checksums unsaved: 0
2020-07-30 23:13:41,579 - DEBUG [main:HBackup@72] - Using input path filter regex: .*do_match.*
2020-07-30 23:13:41,582 - DEBUG [main:HdfsSink@77] - Sink file /to/i_do_match.txt didn't exist for source file i_do_match.txt. Will re-upload.
2020-07-30 23:13:41,582 - DEBUG [main:HBackup@102] - Queueing file for transfer: i_do_match.txt
2020-07-30 23:13:41,582 - DEBUG [main:HBackup@87] - Skipping file i_dont_match.txt because it didn't match regex .*do_match.*
2020-07-30 23:13:41,612 - DEBUG [pool-12-thread-1:HdfsSink$1@122] - Done transferring file to HDFS: i_do_match.txt
2020-07-30 23:13:41,613 - DEBUG [pool-12-thread-1:HdfsSink$1@141] - Commit noop for HDFS, nothing to do to commit to HDFS
2020-07-30 23:13:41,613 - INFO  [main:HBackup@119] - Files copied:      1
2020-07-30 23:13:41,614 - INFO  [main:HBackup@120] - Files skipped:     0
2020-07-30 23:13:41,614 - INFO  [main:HBackup@121] - Files failed:      0
2020-07-30 23:13:41,614 - INFO  [main:HBackup@122] - Chunks copied:     1
2020-07-30 23:13:41,614 - INFO  [main:HBackup@123] - Chunks failed:     0
2020-07-30 23:13:41,615 - INFO  [main:HBackup@124] - Checksums saved:   0
2020-07-30 23:13:41,615 - INFO  [main:HBackup@125] - Checksums unsaved: 0
2020-07-30 23:13:41,650 - DEBUG [main:HBackup@75] - Not configured for input path pattern matching, skipping
2020-07-30 23:13:41,653 - DEBUG [main:HdfsSink@77] - Sink file /to/empty.txt didn't exist for source file empty.txt. Will re-upload.
2020-07-30 23:13:41,653 - DEBUG [main:HBackup@102] - Queueing file for transfer: empty.txt
2020-07-30 23:13:41,669 - DEBUG [pool-13-thread-1:HdfsSink$1@122] - Done transferring file to HDFS: empty.txt
2020-07-30 23:13:41,670 - DEBUG [pool-13-thread-1:HdfsSink$1@141] - Commit noop for HDFS, nothing to do to commit to HDFS
2020-07-30 23:13:41,670 - INFO  [main:HBackup@119] - Files copied:      1
2020-07-30 23:13:41,670 - INFO  [main:HBackup@120] - Files skipped:     0
2020-07-30 23:13:41,671 - INFO  [main:HBackup@121] - Files failed:      0
2020-07-30 23:13:41,671 - INFO  [main:HBackup@122] - Chunks copied:     1
2020-07-30 23:13:41,671 - INFO  [main:HBackup@123] - Chunks failed:     0
2020-07-30 23:13:41,671 - INFO  [main:HBackup@124] - Checksums saved:   0
2020-07-30 23:13:41,671 - INFO  [main:HBackup@125] - Checksums unsaved: 0
2020-07-30 23:13:41,709 - DEBUG [main:HBackup@75] - Not configured for input path pattern matching, skipping
2020-07-30 23:13:41,711 - DEBUG [main:HdfsSink@77] - Sink file /to/file1.txt didn't exist for source file file1.txt. Will re-upload.
2020-07-30 23:13:41,711 - DEBUG [main:HBackup@102] - Queueing file for transfer: file1.txt
2020-07-30 23:13:42,140 - DEBUG [pool-14-thread-1:HdfsSink$1@122] - Done transferring file to HDFS: file1.txt
2020-07-30 23:13:42,140 - DEBUG [pool-14-thread-1:HdfsSink$1@141] - Commit noop for HDFS, nothing to do to commit to HDFS
2020-07-30 23:13:42,140 - INFO  [main:HBackup@119] - Files copied:      1
2020-07-30 23:13:42,141 - INFO  [main:HBackup@120] - Files skipped:     0
2020-07-30 23:13:42,141 - INFO  [main:HBackup@121] - Files failed:      0
2020-07-30 23:13:42,141 - INFO  [main:HBackup@122] - Chunks copied:     1
2020-07-30 23:13:42,141 - INFO  [main:HBackup@123] - Chunks failed:     0
2020-07-30 23:13:42,142 - INFO  [main:HBackup@124] - Checksums saved:   0
2020-07-30 23:13:42,142 - INFO  [main:HBackup@125] - Checksums unsaved: 0
2020-07-30 23:13:42,174 - DEBUG [main:HBackup@75] - Not configured for input path pattern matching, skipping
2020-07-30 23:13:42,176 - DEBUG [main:HdfsSink@59] - Different length in source and sink, will re-upload: file1.txt
2020-07-30 23:13:42,176 - DEBUG [main:HBackup@102] - Queueing file for transfer: file1.txt
2020-07-30 23:13:42,722 - DEBUG [pool-15-thread-1:HdfsSink$1@122] - Done transferring file to HDFS: file1.txt
2020-07-30 23:13:42,722 - DEBUG [pool-15-thread-1:HdfsSink$1@141] - Commit noop for HDFS, nothing to do to commit to HDFS
2020-07-30 23:13:42,722 - INFO  [main:HBackup@119] - Files copied:      1
2020-07-30 23:13:42,722 - INFO  [main:HBackup@120] - Files skipped:     0
2020-07-30 23:13:42,723 - INFO  [main:HBackup@121] - Files failed:      0
2020-07-30 23:13:42,723 - INFO  [main:HBackup@122] - Chunks copied:     1
2020-07-30 23:13:42,723 - INFO  [main:HBackup@123] - Chunks failed:     0
2020-07-30 23:13:42,723 - INFO  [main:HBackup@124] - Checksums saved:   0
2020-07-30 23:13:42,723 - INFO  [main:HBackup@125] - Checksums unsaved: 0
Shutting down the Mini HDFS Cluster
Shutting down DataNode 0
Shutting down the Mini HDFS Cluster
Shutting down DataNode 0
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 19.099 sec - in com.urbanairship.hbackup.HdfsTest

Results :

Failed tests: 
  BackupServiceTest.backupTest:60 expected:<1> but was:<0>

Tests run: 12, Failures: 1, Errors: 0, Skipped: 3

[ERROR] There are test failures.

Please refer to /tmp/tmpy9jfrld9/hbackup/target/surefire-reports for the individual test results.
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:report (report) @ hbackup ---
[INFO] Loading execution data file /tmp/tmpy9jfrld9/hbackup/target/jacoco.exec
[INFO] Analyzed bundle 'hbackup' with 141 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:35 min
[INFO] Finished at: 2020-07-30T23:13:56Z
[INFO] ------------------------------------------------------------------------
