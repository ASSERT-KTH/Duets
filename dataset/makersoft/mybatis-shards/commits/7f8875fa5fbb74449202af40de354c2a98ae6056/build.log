[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------< org.makersoft:mybatis-shards >--------------------
[INFO] Building mybatis-shards 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:prepare-agent (default) @ mybatis-shards ---
[INFO] argLine set to -javaagent:/home/jdbl/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar=destfile=/tmp/tmpwb9km5zk/mybatis-shards/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ mybatis-shards ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ mybatis-shards ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 97 source files to /tmp/tmpwb9km5zk/mybatis-shards/target/classes
[WARNING] /tmp/tmpwb9km5zk/mybatis-shards/src/main/java/org/makersoft/shards/ShardImpl.java: /tmp/tmpwb9km5zk/mybatis-shards/src/main/java/org/makersoft/shards/ShardImpl.java uses or overrides a deprecated API.
[WARNING] /tmp/tmpwb9km5zk/mybatis-shards/src/main/java/org/makersoft/shards/ShardImpl.java: Recompile with -Xlint:deprecation for details.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ mybatis-shards ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 23 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ mybatis-shards ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 28 source files to /tmp/tmpwb9km5zk/mybatis-shards/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ mybatis-shards ---
[INFO] Surefire report directory: /tmp/tmpwb9km5zk/mybatis-shards/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests
 INFO 2020-07-31 05:46:39,677 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/applicationContext-tx.xml]
 INFO 2020-07-31 05:46:39,837 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@54e81b21: startup date [Fri Jul 31 05:46:39 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:39,915 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:39,929 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5a97b17c: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,multiDataSourcesTransactionManager,jdbcTemplate_1,jdbcTemplate_2,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
 INFO 2020-07-31 05:46:40,573 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (1): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@d140627]; rollback [true]
 INFO 2020-07-31 05:46:40,666 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
 INFO 2020-07-31 05:46:40,700 org.springframework.jdbc.support.SQLErrorCodesFactory: SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
 INFO 2020-07-31 05:46:40,705 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:40,761 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:40,761 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@5e8f1db2 testClass = MultipleDataSourcesTransactionManagerTests, testInstance = org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests@64bb6ba7, testMethod = test_transaction_commit_and_rollback@MultipleDataSourcesTransactionManagerTests, testException = org.springframework.jdbc.BadSqlGrammarException: StatementCallback; bad SQL grammar [insert into maker_shards_user (id,username,password,age,gender) values (1,'makersoft','makersoft',23,1)]; nested exception is org.h2.jdbc.JdbcSQLException: Table "MAKER_SHARDS_USER" not found; SQL statement:
insert into maker_shards_user (id,username,password,age,gender) values (1,'makersoft','makersoft',23,1) [42102-168], mergedContextConfiguration = [MergedContextConfiguration@571360b2 testClass = MultipleDataSourcesTransactionManagerTests, locations = '{classpath*:applicationContext-tx.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.416 sec <<< FAILURE! - in org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests
test_transaction_commit_and_rollback(org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests)  Time elapsed: 1.197 sec  <<< ERROR!
org.springframework.jdbc.BadSqlGrammarException: 
StatementCallback; bad SQL grammar [insert into maker_shards_user (id,username,password,age,gender) values (1,'makersoft','makersoft',23,1)]; nested exception is org.h2.jdbc.JdbcSQLException: Table "MAKER_SHARDS_USER" not found; SQL statement:
insert into maker_shards_user (id,username,password,age,gender) values (1,'makersoft','makersoft',23,1) [42102-168]
	at org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests.test_transaction_commit_and_rollback(MultipleDataSourcesTransactionManagerTests.java:37)
Caused by: org.h2.jdbc.JdbcSQLException: 
Table "MAKER_SHARDS_USER" not found; SQL statement:
insert into maker_shards_user (id,username,password,age,gender) values (1,'makersoft','makersoft',23,1) [42102-168]
	at org.makersoft.shards.unit.transaction.MultipleDataSourcesTransactionManagerTests.test_transaction_commit_and_rollback(MultipleDataSourcesTransactionManagerTests.java:37)

Running org.makersoft.shards.unit.utils.AssertTests
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in org.makersoft.shards.unit.utils.AssertTests
Running org.makersoft.shards.unit.utils.ParameterUtilTests
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.143 sec - in org.makersoft.shards.unit.utils.ParameterUtilTests
Running org.makersoft.shards.unit.spring.ShardedSqlSessionFactoryTests
 INFO 2020-07-31 05:46:40,936 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [applicationContext.xml]
 INFO 2020-07-31 05:46:41,017 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@461e9b31: startup date [Fri Jul 31 05:46:41 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:41,032 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:41,038 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@50ba10de: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,dsMap,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:45,793 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:45,805 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 11 ms.
 INFO 2020-07-31 05:46:45,929 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:45,934 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
 INFO 2020-07-31 05:46:46,095 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:46,101 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.236 sec - in org.makersoft.shards.unit.spring.ShardedSqlSessionFactoryTests
Running org.makersoft.shards.unit.session.ShardedSqlSessionFactoryTests
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.039 sec - in org.makersoft.shards.unit.session.ShardedSqlSessionFactoryTests
Running org.makersoft.shards.unit.session.ShardedSqlSessionTests
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.469 sec - in org.makersoft.shards.unit.session.ShardedSqlSessionTests
Running org.makersoft.shards.unit.id.uuid.ShardedUUIDGeneratorTests
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.501 sec - in org.makersoft.shards.unit.id.uuid.ShardedUUIDGeneratorTests
Running org.makersoft.shards.integration.VerticalShardsTests
 INFO 2020-07-31 05:46:47,190 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [applicationContext-vertical.xml]
 INFO 2020-07-31 05:46:47,234 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@7689b31: startup date [Fri Jul 31 05:46:47 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:47,239 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:47,242 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15093d14: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,shard_1,shard_0,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:47,775 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:47,785 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 9 ms.
 INFO 2020-07-31 05:46:47,877 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:47,882 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
 INFO 2020-07-31 05:46:47,936 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (1): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@14b620e5]; rollback [true]
 INFO 2020-07-31 05:46:48,061 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,062 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,062 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@51729c2b testClass = VerticalShardsTests, testInstance = org.makersoft.shards.integration.VerticalShardsTests@4f8d7222, testMethod = testDelete@VerticalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@387f53cf testClass = VerticalShardsTests, locations = '{classpath:applicationContext-vertical.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:48,064 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (2): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@14b620e5]; rollback [true]
 INFO 2020-07-31 05:46:48,222 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,259 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,260 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@51729c2b testClass = VerticalShardsTests, testInstance = org.makersoft.shards.integration.VerticalShardsTests@16a45e5b, testMethod = testInsert@VerticalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@387f53cf testClass = VerticalShardsTests, locations = '{classpath:applicationContext-vertical.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:48,262 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (3): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@14b620e5]; rollback [true]
 INFO 2020-07-31 05:46:48,453 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,494 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,495 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@51729c2b testClass = VerticalShardsTests, testInstance = org.makersoft.shards.integration.VerticalShardsTests@5ce76938, testMethod = testSelect@VerticalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@387f53cf testClass = VerticalShardsTests, locations = '{classpath:applicationContext-vertical.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:48,497 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (4): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@14b620e5]; rollback [true]
 INFO 2020-07-31 05:46:48,598 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,599 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:48,599 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@51729c2b testClass = VerticalShardsTests, testInstance = org.makersoft.shards.integration.VerticalShardsTests@34341b2a, testMethod = testUpdate@VerticalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@387f53cf testClass = VerticalShardsTests, locations = '{classpath:applicationContext-vertical.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.414 sec - in org.makersoft.shards.integration.VerticalShardsTests
Running org.makersoft.shards.integration.ReadWriteAccessTests
 INFO 2020-07-31 05:46:48,603 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [applicationContext-read-write-access.xml]
 INFO 2020-07-31 05:46:48,660 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@7d66a634: startup date [Fri Jul 31 05:46:48 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:48,662 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:48,664 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@266e0341: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_0,dataSource_1,dataSource_2,lazyConnectionDataSource_0,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
 INFO 2020-07-31 05:46:49,003 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:49,008 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
 INFO 2020-07-31 05:46:49,140 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:49,145 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
 INFO 2020-07-31 05:46:49,234 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:49,239 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 4 ms.
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.674 sec - in org.makersoft.shards.integration.ReadWriteAccessTests
Running org.makersoft.shards.integration.EnvironmentTests
 INFO 2020-07-31 05:46:49,281 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [applicationContext.xml]
 INFO 2020-07-31 05:46:49,318 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@5d33426a: startup date [Fri Jul 31 05:46:49 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:49,322 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:49,324 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4c336d66: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,dsMap,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:50,090 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:50,096 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 5 ms.
 INFO 2020-07-31 05:46:50,186 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:50,191 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 4 ms.
 INFO 2020-07-31 05:46:50,290 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:50,294 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 3 ms.
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.05 sec - in org.makersoft.shards.integration.EnvironmentTests
Running org.makersoft.shards.integration.HorizontalShardsTests
 INFO 2020-07-31 05:46:50,333 org.springframework.beans.factory.xml.XmlBeanDefinitionReader: Loading XML bean definitions from class path resource [applicationContext-horizontal.xml]
 INFO 2020-07-31 05:46:50,376 org.springframework.context.support.AbstractApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@24b73741: startup date [Fri Jul 31 05:46:50 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:50,381 org.springframework.core.io.support.PropertiesLoaderSupport: Loading properties file from URL [file:/tmp/tmpwb9km5zk/mybatis-shards/target/test-classes/application.properties]
 INFO 2020-07-31 05:46:50,383 org.springframework.beans.factory.support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6ce9a671: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,shard_0,shard_1,shard_2,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:51,416 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:51,419 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 2 ms.
 INFO 2020-07-31 05:46:51,512 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:51,514 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 2 ms.
 INFO 2020-07-31 05:46:51,605 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Executing SQL script from class path resource [databases/sql/h2/shards.schema.sql]
 INFO 2020-07-31 05:46:51,608 org.springframework.jdbc.datasource.init.ResourceDatabasePopulator: Done executing SQL script from class path resource [databases/sql/h2/shards.schema.sql] in 3 ms.
 INFO 2020-07-31 05:46:51,644 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (1): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:51,806 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,844 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,884 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,923 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,924 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@946b9d9, testMethod = test_find_all@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:51,925 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (2): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:51,974 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,975 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:51,975 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,302 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,302 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@47fc346e, testMethod = test_update_by_id@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:52,304 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (3): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:52,360 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,361 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,361 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,409 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,409 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@9573850, testMethod = test_delete_by_id@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:52,410 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (4): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:52,543 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,544 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,611 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,648 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,648 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@7643c43, testMethod = test_find_by_gender@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:52,650 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (5): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:52,819 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,864 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,901 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,963 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:52,963 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@2cf846b9, testMethod = test_delete@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:52,964 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (6): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:53,142 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,182 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,222 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,261 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,261 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@28790ede, testMethod = test_get_all_count@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:53,262 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (7): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:53,599 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,599 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,652 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,746 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,747 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@15f28ef5, testMethod = test_insert@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:53,749 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (8): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:53,867 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,867 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:53,867 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:54,039 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:54,040 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@5b58b11f, testMethod = test_update@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
 INFO 2020-07-31 05:46:54,040 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Began transaction (9): transaction manager [org.makersoft.shards.transaction.MultiDataSourcesTransactionManager@7eb22e87]; rollback [true]
 INFO 2020-07-31 05:46:54,925 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:54,925 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:54,925 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:55,066 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager: Roll back JDBC transaction success
 INFO 2020-07-31 05:46:55,067 org.springframework.test.context.transaction.TransactionalTestExecutionListener: Rolled back transaction after test execution for test context [TestContext@28ec9c23 testClass = HorizontalShardsTests, testInstance = org.makersoft.shards.integration.HorizontalShardsTests@7dbcbc7b, testMethod = test_get_by_id@HorizontalShardsTests, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@68cacf8b testClass = HorizontalShardsTests, locations = '{classpath:applicationContext-horizontal.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.738 sec - in org.makersoft.shards.integration.HorizontalShardsTests
 INFO 2020-07-31 05:46:55,072 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager$1: Transaction success.
 INFO 2020-07-31 05:46:55,072 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager$1: Transaction success.
 INFO 2020-07-31 05:46:55,072 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@5d33426a: startup date [Fri Jul 31 05:46:49 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager$1: Transaction success.
 INFO 2020-07-31 05:46:55,073 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager$1: Transaction success.
 INFO 2020-07-31 05:46:55,072 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@54e81b21: startup date [Fri Jul 31 05:46:39 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@461e9b31: startup date [Fri Jul 31 05:46:41 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@24b73741: startup date [Fri Jul 31 05:46:50 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@7689b31: startup date [Fri Jul 31 05:46:47 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.springframework.context.support.AbstractApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@7d66a634: startup date [Fri Jul 31 05:46:48 UTC 2020]; root of context hierarchy
 INFO 2020-07-31 05:46:55,073 org.makersoft.shards.transaction.MultiDataSourcesTransactionManager$1: Transaction success.
 INFO 2020-07-31 05:46:55,075 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6ce9a671: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,shard_0,shard_1,shard_2,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:55,074 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@50ba10de: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,dsMap,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:55,074 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4c336d66: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,dsMap,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,dataSource_3,dataSource_h2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,lazyConnectionDataSource_3,lazyConnectionDataSource_h2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:55,074 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5a97b17c: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,multiDataSourcesTransactionManager,jdbcTemplate_1,jdbcTemplate_2,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
 INFO 2020-07-31 05:46:55,076 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15093d14: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,shard_1,shard_0,shardedSqlSessionFactory,org.mybatis.spring.mapper.MapperScannerConfigurer#0,transactionManager,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_1,dataSource_2,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,userMapper,deptMapper,roleMapper]; root of factory hierarchy
 INFO 2020-07-31 05:46:55,076 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@266e0341: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,dataSource_0,dataSource_1,dataSource_2,lazyConnectionDataSource_0,lazyConnectionDataSource_1,lazyConnectionDataSource_2,org.springframework.jdbc.datasource.init.DataSourceInitializer#0,org.springframework.jdbc.datasource.init.DataSourceInitializer#1,org.springframework.jdbc.datasource.init.DataSourceInitializer#2,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy

Results :

Tests in error: 
  MultipleDataSourcesTransactionManagerTests.test_transaction_commit_and_rollback:37  BadSqlGrammar

Tests run: 32, Failures: 0, Errors: 1, Skipped: 0

[ERROR] There are test failures.

Please refer to /tmp/tmpwb9km5zk/mybatis-shards/target/surefire-reports for the individual test results.
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:report (report) @ mybatis-shards ---
[INFO] Loading execution data file /tmp/tmpwb9km5zk/mybatis-shards/target/jacoco.exec
[INFO] Analyzed bundle 'mybatis-shards' with 1381 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  25.311 s
[INFO] Finished at: 2020-07-31T05:46:58Z
[INFO] ------------------------------------------------------------------------
