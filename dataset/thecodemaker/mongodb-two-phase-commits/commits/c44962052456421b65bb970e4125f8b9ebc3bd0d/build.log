[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------------< app:app >-------------------------------
[INFO] Building app 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:prepare-agent (default) @ app ---
[INFO] argLine set to -javaagent:/home/jdbl/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar=destfile=/tmp/tmpiuwiynzj/mongodb-two-phase-commits/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /tmp/tmpiuwiynzj/mongodb-two-phase-commits/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 11 source files to /tmp/tmpiuwiynzj/mongodb-two-phase-commits/target/classes
[INFO] 
[INFO] >>> maven-pmd-plugin:3.2:check (default) > :pmd @ app >>>
[INFO] 
[INFO] --- maven-pmd-plugin:3.2:pmd (pmd) @ app ---
[WARNING] Unable to locate Source XRef to link to - DISABLED
[INFO] 
[INFO] <<< maven-pmd-plugin:3.2:check (default) < :pmd @ app <<<
[INFO] 
[INFO] 
[INFO] --- maven-pmd-plugin:3.2:check (default) @ app ---
[INFO] 
[INFO] 
[INFO] >>> maven-pmd-plugin:3.2:cpd-check (default) > :cpd @ app >>>
[INFO] 
[INFO] --- maven-pmd-plugin:3.2:cpd (cpd) @ app ---
[WARNING] Unable to locate Source XRef to link to - DISABLED
[INFO] 
[INFO] <<< maven-pmd-plugin:3.2:cpd-check (default) < :cpd @ app <<<
[INFO] 
[INFO] 
[INFO] --- maven-pmd-plugin:3.2:cpd-check (default) @ app ---
[INFO] 
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /tmp/tmpiuwiynzj/mongodb-two-phase-commits/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /tmp/tmpiuwiynzj/mongodb-two-phase-commits/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ app ---
[INFO] Surefire report directory: /tmp/tmpiuwiynzj/mongodb-two-phase-commits/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running app.MongoDBTwoPhaseCommitsTest
Jul 30, 2020 3:30:01 PM org.springframework.test.context.TestContextManager retrieveTestExecutionListeners
INFO: Could not instantiate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener]. Specify custom listener classes or make the default listener classes (and their required dependencies) available. Offending class: [javax/servlet/ServletContext]
Jul 30, 2020 3:30:01 PM org.springframework.test.context.TestContextManager retrieveTestExecutionListeners
INFO: Could not instantiate TestExecutionListener [org.springframework.test.context.transaction.TransactionalTestExecutionListener]. Specify custom listener classes or make the default listener classes (and their required dependencies) available. Offending class: [org/springframework/transaction/interceptor/TransactionAttributeSource]
Jul 30, 2020 3:30:02 PM org.springframework.context.support.GenericApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.GenericApplicationContext@165b8a71: startup date [Thu Jul 30 15:30:02 UTC 2020]; root of context hierarchy
Detect Distribution DONE
Download Version{2.2.0-rc0}:Linux:B64 START
Download Version{2.2.0-rc0}:Linux:B64 DownloadSize: 59987700
Download Version{2.2.0-rc0}:Linux:B64 0% 1% 2% 3% 4% 5% 6% 7% 8% 9% 10% 11% 12% 13% 14% 15% 16% 17% 18% 19% 20% 21% 22% 23% 24% 25% 26% 27% 28% 29% 30% 31% 32% 33% 34% 35% 36% 37% 38% 39% 40% 41% 42% 43% 44% 45% 46% 47% 48% 49% 50% 51% 52% 53% 54% 55% 56% 57% 58% 59% 60% 61% 62% 63% 64% 65% 66% 67% 68% 69% 70% 71% 72% 73% 74% 75% 76% 77% 78% 79% 80% 81% 82% 83% 84% 85% 86% 87% 88% 89% 90% 91% 92% 93% 94% 95% 96% 97% 98% 99% 100% Download Version{2.2.0-rc0}:Linux:B64 DONE
Check Distribution DONE
Extract /home/jdbl/.embedmongo/linux/mongodb-linux-x86_64-2.2.0-rc0.tgz START
Extract /home/jdbl/.embedmongo/linux/mongodb-linux-x86_64-2.2.0-rc0.tgz DONE
note: noprealloc may hurt performance in many applications
[mongod output] Thu Jul 30 15:30:10 BackgroundJob starting: DataFileSync
[mongod output] Thu Jul 30 15:30:10 versionCmpTest passed
[mongod output] Thu Jul 30 15:30:10 versionArrayTest passed
[mongod output] Thu Jul 30 15:30:10 shardKeyTest passed
[mongod output] Thu Jul 30 15:30:10 shardObjTest passed
[mongod output] Thu Jul 30 15:30:10 isInRangeTest passed
[mongod output] Thu Jul 30 15:30:10 [initandlisten] MongoDB starting : pid=2847 port=17017 dbpath=/tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da 64-bit host=dd1b666fdbd8
[mongod output] Thu Jul 30 15:30:10 [initandlisten] db version v2.2.0-rc0, pdfile version 4.5
[mongod output] Thu Jul 30 15:30:10 [initandlisten] git version: 33dc8445316479bbaa062db00f179fa5c39bbddb
[mongod output] Thu Jul 30 15:30:10 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
[mongod output] Thu Jul 30 15:30:10 [initandlisten] options: { dbpath: "/tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da", noauth: true, nohttpinterface: true, nojournal: true, noprealloc: true, port: 17017, smallfiles: true, verbose: true }
[mongod output] Thu Jul 30 15:30:10 [initandlisten] flushing directory /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da
[mongod output] Thu Jul 30 15:30:10 [initandlisten] opening db:  local
[mongod output] Thu Jul 30 15:30:10 [initandlisten] enter repairDatabases (to check pdfile version #)
[mongod output] Thu Jul 30 15:30:10 [initandlisten] done repairDatabases
[mongod output] Thu Jul 30 15:30:10 [initandlisten] fd limit hard:1048576 soft:1048576 max conn: 838860
[mongod output] Thu Jul 30 15:30:10 [initandlisten] waiting for connections on port 17017
[mongod output] Thu Jul 30 15:30:10 BackgroundJob starting: PeriodicTask::Runner
[mongod output] Thu Jul 30 15:30:10 BackgroundJob starting: snapshot
[mongod output] Thu Jul 30 15:30:10 BackgroundJob starting: ClientCursorMonitor
[mongod output] Thu Jul 30 15:30:10 BackgroundJob starting: TTLMonitor
[mongod output] Thu Jul 30 15:30:10 [initandlisten] connection accepted from 127.0.0.1:36514 #1 (1 connection now open)
[mongod output] Thu Jul 30 15:30:10 [conn1] run command admin.$cmd { ismaster: 1 }
[mongod output] Thu Jul 30 15:30:10 [conn1] command admin.$cmd command: { ismaster: 1 } ntoreturn:1 keyUpdates:0  reslen:90 0ms
[mongod output] Thu Jul 30 15:30:10 [conn1] run command admin.$cmd { buildinfo: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn1] command admin.$cmd command: { buildinfo: 1 } ntoreturn:1 keyUpdates:0  reslen:331 0ms
[mongod output] Thu Jul 30 15:30:11 [initandlisten] connection accepted from 127.0.0.1:36520 #2 (2 connections now open)
[mongod output] Thu Jul 30 15:30:11 [conn2] opening db:  database
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] allocating new datafile /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/database.ns, filling with zeroes...
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] creating directory /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] flushing directory /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] flushing directory /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] done allocating datafile /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/database.ns, size: 16MB,  took 0.006 secs
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] allocating new datafile /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/database.0, filling with zeroes...
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] flushing directory /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da
[mongod output] Thu Jul 30 15:30:11 [FileAllocator] done allocating datafile /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/database.0, size: 16MB,  took 0.003 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 4096 0
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.system.indexes size 4096 0
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.system.indexes
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.system.namespaces size 2304 0
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.system.namespaces
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.0/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 0
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:30690 30ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions size 6400 0
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.transactions { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.1/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions.$_id_ size 36864 0
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.transactions keyUpdates:0 locks(micros) w:617 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions query: { state: "PENDING", lastModified: { $lt: 1596121211501 } } ntoreturn:1 keyUpdates:0 locks(micros) r:101 nreturned:1 reslen:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: -100 }, $push: { pendingTransactions: "1" } } nscanned:2 nupdated:0 keyUpdates:0 locks(micros) w:159 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: 100 }, $push: { pendingTransactions: "1" } } nscanned:1 nmoved:1 nupdated:1 keyUpdates:0 locks(micros) w:165 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "PENDING" } update: { $set: { state: "APPLIED", lastModified: 1596123011576 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:122 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:119 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:117 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "APPLIED" } update: { $set: { state: "DONE", lastModified: 1596123011579 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:112 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "A" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:14 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "B" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:18 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:34 nreturned:1 reslen:118 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] create collection database.$freelist {}
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.$freelist size 8192 0
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:379 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:207 reslen:128 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 3328 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.2/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:473 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts ntoreturn:1 keyUpdates:0 locks(micros) r:27 nreturned:1 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:240 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:51 reslen:62 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 4096 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.3/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:459 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions size 6400 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.transactions { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.4/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.transactions keyUpdates:0 locks(micros) w:472 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions query: { state: "PENDING", lastModified: { $lt: 1596121211638 } } ntoreturn:1 keyUpdates:0 locks(micros) r:94 nreturned:1 reslen:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "PENDING" } update: { $set: { state: "CANCELING", lastModified: 1596123011642 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:150 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: "1" } update: { $inc: { balance: 100 }, $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: "1" } update: { $inc: { balance: -100 }, $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:100 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "CANCELING" } update: { $set: { state: "CANCELED", lastModified: 1596123011644 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "A" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:14 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "B" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:13 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:27 nreturned:1 reslen:122 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:252 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:263 reslen:128 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 3328 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.5/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:476 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions size 6400 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.transactions { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.6/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.transactions keyUpdates:0 locks(micros) w:513 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:40 nreturned:1 reslen:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "INITIAL" } update: { $set: { state: "PENDING", lastModified: 1596123011669 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:139 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: -100 }, $push: { pendingTransactions: "1" } } nscanned:1 nmoved:1 nupdated:1 keyUpdates:0 locks(micros) w:208 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: 100 }, $push: { pendingTransactions: "1" } } nscanned:1 nmoved:1 nupdated:1 keyUpdates:0 locks(micros) w:174 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "PENDING" } update: { $set: { state: "APPLIED", lastModified: 1596123011676 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:129 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:122 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:108 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "APPLIED" } update: { $set: { state: "DONE", lastModified: 1596123011679 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "A" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:14 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "B" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:13 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:28 nreturned:1 reslen:118 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:270 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:223 reslen:128 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 4096 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.7/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:481 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions size 6400 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.transactions { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.8/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.transactions keyUpdates:0 locks(micros) w:354 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions query: { state: "APPLIED", lastModified: { $lt: 1596121211687 } } ntoreturn:1 keyUpdates:0 locks(micros) r:69 nreturned:1 reslen:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:142 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:117 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "APPLIED" } update: { $set: { state: "DONE", lastModified: 1596123011691 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:134 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "A" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:14 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "B" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:14 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:30 nreturned:1 reslen:118 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:261 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:228 reslen:128 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts size 3328 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.accounts { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.9/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.accounts.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.accounts keyUpdates:0 locks(micros) w:494 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions size 6400 1
[mongod output] Thu Jul 30 15:30:11 [conn2] adding _id index for collection database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] build index database.transactions { _id: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] external sort root: /tmp/embedmongo-db-f465eaa0-3295-4611-9aba-7898ce5c02da/_tmp/esort.1596123011.10/
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 external sort used : 0 files  in 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] allocExtent database.transactions.$_id_ size 36864 1
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions.$_id_
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 done building bottom layer, going to commit
[mongod output] Thu Jul 30 15:30:11 [conn2] build index done.  scanned 0 total records. 0 secs
[mongod output] Thu Jul 30 15:30:11 [conn2] New namespace: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] insert database.transactions keyUpdates:0 locks(micros) w:428 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:67 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:25 nreturned:1 reslen:121 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "INITIAL" } update: { $set: { state: "PENDING", lastModified: 1596123011703 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:128 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: -100 }, $push: { pendingTransactions: "1" } } nscanned:1 nmoved:1 nupdated:1 keyUpdates:0 locks(micros) w:165 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: { $ne: "1" } } update: { $inc: { balance: 100 }, $push: { pendingTransactions: "1" } } nscanned:1 nmoved:1 nupdated:1 keyUpdates:0 locks(micros) w:146 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "PENDING" } update: { $set: { state: "APPLIED", lastModified: 1596123011706 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:93 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "A", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:160 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.accounts query: { _id: "B", pendingTransactions: "1" } update: { $pull: { pendingTransactions: "1" } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:125 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2]   running multiple plans
[mongod output] Thu Jul 30 15:30:11 [conn2] update database.transactions query: { _id: "1", state: "APPLIED" } update: { $set: { state: "DONE", lastModified: 1596123011716 } } nscanned:1 nupdated:1 keyUpdates:0 locks(micros) w:108 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { getlasterror: 1 }
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { getlasterror: 1 } ntoreturn:1 keyUpdates:0  reslen:85 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "A" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:20 reslen:75 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] query database.accounts query: { _id: "B" } ntoreturn:1 idhack:1 keyUpdates:0 locks(micros) r:19 reslen:75 0ms
[mongod output] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.528 sec - in app.MongoDBTwoPhaseCommitsTest
Thu Jul 30 15:30:11 [conn2] query database.transactions ntoreturn:1 keyUpdates:0 locks(micros) r:33 nreturned:1 reslen:118 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "accounts" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.accounts
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "accounts" } ntoreturn:1 keyUpdates:0 locks(micros) w:218 reslen:124 0ms
[mongod output] Thu Jul 30 15:30:11 [conn2] run command database.$cmd { drop: "transactions" }
[mongod output] Thu Jul 30 15:30:11 [conn2] CMD: drop database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] dropCollection: database.transactions
[mongod output] Thu Jul 30 15:30:11 [conn2] 	 dropIndexes done
[mongod output] Thu Jul 30 15:30:11 [conn2] command database.$cmd command: { drop: "transactions" } ntoreturn:1 keyUpdates:0 locks(micros) w:219 reslen:128 0ms
[mongod output] Jul 30, 2020 3:30:11 PM org.springframework.context.support.GenericApplicationContext doClose
INFO: Closing org.springframework.context.support.GenericApplicationContext@165b8a71: startup date [Thu Jul 30 15:30:02 UTC 2020]; root of context hierarchy
Thu Jul 30 15:30:11 [initandlisten] connection accepted from 127.0.0.1:36532 #3 (3 connections now open)
[mongod output] Thu Jul 30 15:30:11 [conn3] run command admin.$cmd { shutdown: 1, force: true }
[mongod output] 
Thu Jul 30 15:30:11 [conn3] terminating, shutdown command received
[mongod output] Thu Jul 30 15:30:11 dbexit: shutdown called
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: going to close listening sockets...
[mongod output] Thu Jul 30 15:30:11 [conn3] closing listening socket: 5
[mongod output] Thu Jul 30 15:30:11 [conn3] closing listening socket: 6
[mongod output] Thu Jul 30 15:30:11 [conn3] removing socket file: /tmp/mongodb-17017.sock
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: going to flush diaglog...
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: going to close sockets...
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: waiting for fs preallocator...
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: closing all files...
[mongod output] Thu Jul 30 15:30:11 [conn3] closeAllFiles() finished
[mongod output] Thu Jul 30 15:30:11 [conn3] shutdown: removing fs lock...
[mongod output] Thu Jul 30 15:30:11 dbexit: really exiting now
[mongod output] 
Results :

Tests run: 6, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:report (report) @ app ---
[INFO] Loading execution data file /tmp/tmpiuwiynzj/mongodb-two-phase-commits/target/jacoco.exec
[INFO] Analyzed bundle 'app' with 699 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  24.102 s
[INFO] Finished at: 2020-07-30T15:30:14Z
[INFO] ------------------------------------------------------------------------
