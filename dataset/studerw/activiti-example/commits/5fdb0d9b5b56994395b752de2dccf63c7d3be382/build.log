[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------< com.studerw:activiti-example >--------------------
[INFO] Building activiti-example 1.0-SNAPSHOT
[INFO] --------------------------------[ war ]---------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:prepare-agent (default) @ activiti-example ---
[INFO] argLine set to -javaagent:/home/jdbl/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar=destfile=/tmp/tmpgr5wm09n/activiti-example/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ activiti-example ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 37 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ activiti-example ---
[INFO] Compiling 63 source files to /tmp/tmpgr5wm09n/activiti-example/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ activiti-example ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 11 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ activiti-example ---
[INFO] Compiling 15 source files to /tmp/tmpgr5wm09n/activiti-example/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ activiti-example ---
[INFO] Surefire report directory: /tmp/tmpgr5wm09n/activiti-example/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.studerw.activiti.model.DocTypeTest
DEBUG [DocTypeTest]  [] - BOOK_REPORT - NONE
DEBUG [DocTypeTest]  [] - name: BOOK_REPORT
DEBUG [DocTypeTest]  [] - ordinal: 0
DEBUG [DocTypeTest]  [] - docType: BOOK_REPORT
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.625 sec - in com.studerw.activiti.model.DocTypeTest
Running com.studerw.activiti.model.JsonTest
DEBUG [JsonTest]  [] - UTF-8
DEBUG [JsonTest]  [] - UTF-8
DEBUG [JsonTest]  [] - UTF-8
DEBUG [JsonTest]  [] - {name=foo, age=29, group=some weired group_blah}
DEBUG [JsonTest]  [] - ["COLLABORATION","APPROVE_REJECT"]
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.102 sec - in com.studerw.activiti.model.JsonTest
Running com.studerw.activiti.model.ValidatorTest
DEBUG [ValidatorTest]  [] - Empty book report violations: 8
DEBUG [ValidatorTest]  [] - violations: 2
DEBUG [ValidatorTest]  [] - violations: 1
DEBUG [ValidatorTest]  [] - violations: 0
DEBUG [ValidatorTest]  [] - violations: 3
DEBUG [ValidatorTest]  [] - violations: 1
DEBUG [ValidatorTest]  [] - violations: 0
DEBUG [ValidatorTest]  [] - Empty invoice violations: 6
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.533 sec - in com.studerw.activiti.model.ValidatorTest
Running com.studerw.activiti.BookReportTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@6b6cf3c1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@702e21c, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@5c450960, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7c5fbde4, org.springframework.test.context.transaction.TransactionalTestExecutionListener@7021bb55, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6023b54f]
Tests run: 2, Failures: 0, Errors: 0, Skipped: 2, Time elapsed: 0.197 sec - in com.studerw.activiti.BookReportTest
Running com.studerw.activiti.workflow.WorkflowServiceTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@12ae75f1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6eeb15f9, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1f8a1b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@568cbf8d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@376c5950, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@11ec699]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/testAppContext.xml]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/activiti-config.xml]
INFO  [AbstractApplicationContext]  [] - Refreshing org.springframework.context.support.GenericApplicationContext@73f6ffb1: startup date [Thu Jul 30 20:43:44 UTC 2020]; root of context hierarchy
INFO  [EmbeddedDatabaseFactory]  [] - Starting embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
INFO  [ScriptUtils]  [] - Executing SQL script from class path resource [db/h2/activiti.h2.create.extra.sql]
INFO  [ScriptUtils]  [] - Executed SQL script from class path resource [db/h2/activiti.h2.create.extra.sql] in 41 ms.
INFO  [DbSqlSession]  [] - performing create on engine with resource org/activiti/db/create/activiti.h2.create.engine.sql
INFO  [DbSqlSession]  [] - performing create on history with resource org/activiti/db/create/activiti.h2.create.history.sql
INFO  [DbSqlSession]  [] - performing create on identity with resource org/activiti/db/create/activiti.h2.create.identity.sql
INFO  [ProcessEngineImpl]  [] - ProcessEngine default created
INFO  [AbstractAsyncJobExecutor]  [] - Starting up the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [DefaultAsyncJobExecutor]  [] - Creating thread pool queue of size 100
INFO  [DefaultAsyncJobExecutor]  [] - Creating executor service with corePoolSize 2, maxPoolSize 10 and keepAliveTime 5000
INFO  [AcquireAsyncJobsDueRunnable]  [] - starting to acquire async jobs due
INFO  [AcquireTimerJobsRunnable]  [] - starting to acquire async jobs due
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/invoice_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_sales.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/receipt_engineering.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_bad_namespace.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_engineering.bpmn20.xml
INFO  [DemoDataGenerator]  [] - Initializing demo groups
INFO  [DemoDataGenerator]  [] - Initializing demo users
DEBUG [SpringContextListener]  [] - **********************REFRESHED Context [org.springframework.context.support.GenericApplicationContext@73f6ffb1] of parent [null] ***********************************
INFO  [SpringContextListener]  [] - AppContext org.springframework.context.support.GenericApplicationContext@73f6ffb1: beans(39)
DEBUG [SpringContextListener]  [] - ******
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=UNIT_TEST_NO_EXIST
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
DEBUG [WorkflowServiceTest]  [] - found BOOK_REPORT___engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=foo
DEBUG [WorkflowService]  [] - no group workflow exists of doctype=BOOK_REPORT and group=foo -> checking for base wf.
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT
DEBUG [WorkflowServiceTest]  [] - found BOOK_REPORT___NONE
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=UNIT_TEST_NO_EXIST and group=foo
DEBUG [WorkflowService]  [] - no group workflow exists of doctype=UNIT_TEST_NO_EXIST and group=foo -> checking for base wf.
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=UNIT_TEST_NO_EXIST
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=FOO_SDFSFSF_SDFSDF
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - using likeQuery for baseTypes = %___NONE
DEBUG [WorkflowService]  [] - Base type = []
DEBUG [WorkflowService]  [] - BOOK_REPORT - __NONE
DEBUG [WorkflowService]  [] - INVOICE - __NONE
DEBUG [WorkflowService]  [] - Found baseDocTypes: [BOOK_REPORT, INVOICE]
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT.
INFO  [WorkflowService]  [] - search for base doc workflow using processId=BOOK_REPORT___NONE
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=UNIT_TEST_NO_EXIST.
INFO  [WorkflowService]  [] - search for base doc workflow using processId=UNIT_TEST_NO_EXIST___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___NONE:1:11 - BOOK_REPORT___NONE
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___engineering:1:13 - BOOK_REPORT___engineering
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___management:1:12 - BOOK_REPORT___management
DEBUG [WorkflowServiceTest]  [] - BOOK_REPORT___sales:1:9 - BOOK_REPORT___sales
DEBUG [WorkflowServiceTest]  [] - INVOICE___NONE:1:8 - INVOICE___NONE
DEBUG [WorkflowServiceTest]  [] - RECEIPT___engineering:1:10 - RECEIPT___engineering
DEBUG [WorkflowService]  [] - Lookign up all process definitions with latestVersion=false
DEBUG [WorkflowService]  [] - Found 5 definitions.
DEBUG [WorkflowService]  [] - Lookign up all process definitions with latestVersion=true
DEBUG [WorkflowService]  [] - Found 5 definitions.
DEBUG [WorkflowServiceTest]  [] - {"name":"foo", "age":"29", "group": "some weired group_blah"}
DEBUG [WorkflowServiceTest]  [] - This process is initiated when a book report is created.
DEBUG [WorkflowServiceTest]  [] - This process is explicit for Book Report and Group=sales
DEBUG [WorkflowServiceTest]  [] - This Base Invoice Workflow.
DEBUG [WorkflowServiceTest]  [] - This process is explicit for RECEIPT and Group Engineering. However, no RECEIPT base type
Tests run: 10, Failures: 0, Errors: 0, Skipped: 4, Time elapsed: 7.557 sec - in com.studerw.activiti.workflow.WorkflowServiceTest
Running com.studerw.activiti.workflow.WorkflowParserTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@67ba1123, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@47389690, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4f9bfc38, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6ec53a5, org.springframework.test.context.transaction.TransactionalTestExecutionListener@31e86952, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@32e7f5e9]
DEBUG [WorkflowParserTest]  [] - Using key: BOOK_REPORT___engineering
INFO  [BpmnDeployer]  [] - Processing resource dynamic-model.bpmn
DEBUG [WorkflowParserTest]  [] - BOOK_REPORT___NONE
DEBUG [WorkflowParserTest]  [] - BOOK_REPORT___blah
DEBUG [WorkflowParserTest]  [] - BOOK_REPORT___engineering
DEBUG [WorkflowParserTest]  [] - BOOK_REPORT___management
DEBUG [WorkflowParserTest]  [] - BOOK_REPORT___sales
DEBUG [WorkflowParserTest]  [] - INVOICE___NONE
DEBUG [WorkflowParserTest]  [] - RECEIPT___engineering
DEBUG [WorkflowParserTest]  [] - Using key: BOOK_REPORT___engineering
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_sub_process_start_event
DEBUG [WorkflowParserTest]  [] - FlowElement: COLLABORATE_DOC_USER_TASK_1
DEBUG [WorkflowParserTest]  [] - FlowElement: COLLABORATE_DOC_USER_TASK_2
DEBUG [WorkflowParserTest]  [] - FlowElement: APPROVE_REJECT_DOC_USER_TASK_1
DEBUG [WorkflowParserTest]  [] - FlowElement: APPROVE_REJECT_DOC_USER_TASK_2
DEBUG [WorkflowParserTest]  [] - FlowElement: rejectedErrorEndEvent
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_subflow_1
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_subflow_2
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_subflow_3
DEBUG [WorkflowParserTest]  [] - FlowElement: exclusivegateway1
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_subflow_4
DEBUG [WorkflowParserTest]  [] - FlowElement: docRejectedSubFlow1
DEBUG [WorkflowParserTest]  [] - FlowElement: docApprovedSubFlow1
DEBUG [WorkflowParserTest]  [] - FlowElement: exclusivegateway2
DEBUG [WorkflowParserTest]  [] - FlowElement: docRejectedSubFlow2
DEBUG [WorkflowParserTest]  [] - FlowElement: docApprovedSubFlow2
DEBUG [WorkflowParserTest]  [] - FlowElement: dynamic_sub_process_end_event
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.825 sec - in com.studerw.activiti.workflow.WorkflowParserTest
Running com.studerw.activiti.ActivitiSpringTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@409ac088, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@12f72a42, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@556b7486, org.springframework.test.context.support.DirtiesContextTestExecutionListener@576e6d9b, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4166797e, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6ae8fe2a]
DEBUG [ActivitiSpringTest]  [] - count:  5
DEBUG [ActivitiSpringTest]  [] - cookie-monster
DEBUG [ActivitiSpringTest]  [] - fozzie
DEBUG [ActivitiSpringTest]  [] - gonzo
DEBUG [ActivitiSpringTest]  [] - kermit
DEBUG [ActivitiSpringTest]  [] - miss-piggy
DEBUG [ActivitiSpringTest]  [] - cookie-monster
DEBUG [ActivitiSpringTest]  [] - user - security-role
DEBUG [ActivitiSpringTest]  [] - fozzie
DEBUG [ActivitiSpringTest]  [] - user - security-role
DEBUG [ActivitiSpringTest]  [] - gonzo
DEBUG [ActivitiSpringTest]  [] - user - security-role
DEBUG [ActivitiSpringTest]  [] - kermit
DEBUG [ActivitiSpringTest]  [] - admin - security-role
DEBUG [ActivitiSpringTest]  [] - user - security-role
DEBUG [ActivitiSpringTest]  [] - miss-piggy
DEBUG [ActivitiSpringTest]  [] - user - security-role
DEBUG [ActivitiSpringTest]  [] - newUser
DEBUG [ActivitiSpringTest]  [] - user - security-role
Tests run: 4, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.08 sec - in com.studerw.activiti.ActivitiSpringTest
Running com.studerw.activiti.IdentityServiceTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@56a7a9b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7df50ada, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@63d33a60, org.springframework.test.context.support.DirtiesContextTestExecutionListener@54402ce1, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2a83a50, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@575e4305]
INFO  [TransactionContext]  [] - Began transaction (1) for test context [DefaultTestContext@127df224 testClass = IdentityServiceTest, testInstance = com.studerw.activiti.IdentityServiceTest@5ace150, testMethod = testUsers@IdentityServiceTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@2da473b4 testClass = IdentityServiceTest, locations = '{classpath:spring/testAppContext.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]; transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@60f099f0]; rollback [true]
DEBUG [IdentityServiceTest]  [] - cookie-monster
DEBUG [IdentityServiceTest]  [] - fozzie
DEBUG [IdentityServiceTest]  [] - gonzo
DEBUG [IdentityServiceTest]  [] - kermit
DEBUG [IdentityServiceTest]  [] - miss-piggy
DEBUG [IdentityServiceTest]  [] - newUser
ERROR [CommandContext]  [] - Error while closing command context
org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
### The error may involve org.activiti.engine.impl.persistence.entity.UserEntity.insertUser-Inline
### The error occurred while setting parameters
### SQL: insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)     values (       ?,       1,       ?,       ?,       ?,       ?     )
### Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:172)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:157)
	at org.activiti.engine.impl.db.DbSqlSession.flushRegularInsert(DbSqlSession.java:830)
	at org.activiti.engine.impl.db.DbSqlSession.flushPersistentObjects(DbSqlSession.java:811)
	at org.activiti.engine.impl.db.DbSqlSession.flushInserts(DbSqlSession.java:794)
	at org.activiti.engine.impl.db.DbSqlSession.flush(DbSqlSession.java:615)
	at org.activiti.engine.impl.interceptor.CommandContext.flushSessions(CommandContext.java:212)
	at org.activiti.engine.impl.interceptor.CommandContext.close(CommandContext.java:138)
	at org.activiti.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:66)
	at org.activiti.spring.SpringTransactionInterceptor$1.doInTransaction(SpringTransactionInterceptor.java:47)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:133)
	at org.activiti.spring.SpringTransactionInterceptor.execute(SpringTransactionInterceptor.java:45)
	at org.activiti.engine.impl.interceptor.LogInterceptor.execute(LogInterceptor.java:31)
	at org.activiti.engine.impl.cfg.CommandExecutorImpl.execute(CommandExecutorImpl.java:40)
	at org.activiti.engine.impl.cfg.CommandExecutorImpl.execute(CommandExecutorImpl.java:35)
	at org.activiti.engine.impl.IdentityServiceImpl.saveUser(IdentityServiceImpl.java:65)
	at com.studerw.activiti.IdentityServiceTest.testUsers(IdentityServiceTest.java:46)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:457)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:427)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.index.BaseIndex.getDuplicateKeyException(BaseIndex.java:103)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:220)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:196)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:546)
	at org.h2.command.dml.Insert.insertRows(Insert.java:180)
	at org.h2.command.dml.Insert.update(Insert.java:132)
	at org.h2.command.CommandContainer.update(CommandContainer.java:133)
	at org.h2.command.Command.executeUpdate(Command.java:267)
	at org.h2.jdbc.JdbcPreparedStatement.execute(JdbcPreparedStatement.java:250)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:45)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:73)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:115)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:75)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:170)
	... 46 more
INFO  [TransactionContext]  [] - Rolled back transaction for test: [DefaultTestContext@127df224 testClass = IdentityServiceTest, testInstance = com.studerw.activiti.IdentityServiceTest@5ace150, testMethod = testUsers@IdentityServiceTest, testException = org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
### The error may involve org.activiti.engine.impl.persistence.entity.UserEntity.insertUser-Inline
### The error occurred while setting parameters
### SQL: insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)     values (       ?,       1,       ?,       ?,       ?,       ?     )
### Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199], mergedContextConfiguration = [MergedContextConfiguration@2da473b4 testClass = IdentityServiceTest, locations = '{classpath:spring/testAppContext.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
DEBUG [IdentityServiceTest]  [] - cookie-monster
DEBUG [IdentityServiceTest]  [] - user - security-role
DEBUG [IdentityServiceTest]  [] - fozzie
DEBUG [IdentityServiceTest]  [] - user - security-role
DEBUG [IdentityServiceTest]  [] - gonzo
DEBUG [IdentityServiceTest]  [] - user - security-role
DEBUG [IdentityServiceTest]  [] - kermit
DEBUG [IdentityServiceTest]  [] - admin - security-role
DEBUG [IdentityServiceTest]  [] - user - security-role
DEBUG [IdentityServiceTest]  [] - miss-piggy
DEBUG [IdentityServiceTest]  [] - user - security-role
DEBUG [IdentityServiceTest]  [] - newUser
DEBUG [IdentityServiceTest]  [] - user - security-role
Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.087 sec <<< FAILURE! - in com.studerw.activiti.IdentityServiceTest
testUsers(com.studerw.activiti.IdentityServiceTest)  Time elapsed: 0.045 sec  <<< ERROR!
org.apache.ibatis.exceptions.PersistenceException: 

### Error updating database.  Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
### The error may involve org.activiti.engine.impl.persistence.entity.UserEntity.insertUser-Inline
### The error occurred while setting parameters
### SQL: insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)     values (       ?,       1,       ?,       ?,       ?,       ?     )
### Cause: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
	at com.studerw.activiti.IdentityServiceTest.testUsers(IdentityServiceTest.java:46)
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: 
Unique index or primary key violation: "PUBLIC.PRIMARY_KEY_7F ON PUBLIC.ACT_ID_USER(ID_) VALUES 6"; SQL statement:
insert into ACT_ID_USER (ID_, REV_, FIRST_, LAST_, EMAIL_, PWD_)
    values (
      ?,
      1,
      ?,
      ?,
      ?,
      ?
    ) [23505-199]
	at com.studerw.activiti.IdentityServiceTest.testUsers(IdentityServiceTest.java:46)

Running com.studerw.activiti.NewUserProcessTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@453aee9f, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@642c6148, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@3ca7f56, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7b612a40, org.springframework.test.context.transaction.TransactionalTestExecutionListener@693d7da5, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6e1c77eb]
Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.003 sec - in com.studerw.activiti.NewUserProcessTest
Running com.studerw.activiti.build.WorkflowBuilderTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@61768eed, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@d173636, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1ee89fca, org.springframework.test.context.support.DirtiesContextTestExecutionListener@515a3839, org.springframework.test.context.transaction.TransactionalTestExecutionListener@48ec519, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@301ce538]
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
DEBUG [WorkflowBuilder]  [] - returning dynamic tasks for procDef: BOOK_REPORT___engineering
DEBUG [WorkflowBuilder]  [] - Adding task: COLLABORATE_DOC_USER_TASK_1 at index: 0
DEBUG [WorkflowBuilder]  [] - Adding task: COLLABORATE_DOC_USER_TASK_2 at index: 1
DEBUG [WorkflowBuilder]  [] - Adding task: APPROVE_REJECT_DOC_USER_TASK_1 at index: 2
DEBUG [WorkflowBuilder]  [] - Adding task: APPROVE_REJECT_DOC_USER_TASK_2 at index: 3
INFO  [WorkflowBuilder]  [] - updating tasks for DocType BOOK_REPORT and group: engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
INFO  [BpmnDeployer]  [] - Processing resource BOOK_REPORT___engineering.bpmn
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
DEBUG [WorkflowBuilder]  [] - returning dynamic tasks for procDef: BOOK_REPORT___engineering
DEBUG [WorkflowBuilder]  [] - Adding task: APPROVE_REJECT_DOC_USER_TASK_1 at index: 0
DEBUG [WorkflowBuilder]  [] - Adding task: COLLABORATE_DOC_USER_TASK_1 at index: 1
INFO  [AbstractApplicationContext]  [] - Closing org.springframework.context.support.GenericApplicationContext@73f6ffb1: startup date [Thu Jul 30 20:43:44 UTC 2020]; root of context hierarchy
INFO  [AbstractAsyncJobExecutor]  [] - Shutting down the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [AcquireAsyncJobsDueRunnable]  [] - stopped async job due acquisition
INFO  [AcquireTimerJobsRunnable]  [] - stopped async job due acquisition
INFO  [EmbeddedDatabaseFactory]  [] - Shutting down embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/testAppContext.xml]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/activiti-config.xml]
INFO  [AbstractApplicationContext]  [] - Refreshing org.springframework.context.support.GenericApplicationContext@6e17db0a: startup date [Thu Jul 30 20:43:51 UTC 2020]; root of context hierarchy
INFO  [EmbeddedDatabaseFactory]  [] - Starting embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
INFO  [ScriptUtils]  [] - Executing SQL script from class path resource [db/h2/activiti.h2.create.extra.sql]
INFO  [ScriptUtils]  [] - Executed SQL script from class path resource [db/h2/activiti.h2.create.extra.sql] in 4 ms.
INFO  [DbSqlSession]  [] - performing create on engine with resource org/activiti/db/create/activiti.h2.create.engine.sql
INFO  [DbSqlSession]  [] - performing create on history with resource org/activiti/db/create/activiti.h2.create.history.sql
INFO  [DbSqlSession]  [] - performing create on identity with resource org/activiti/db/create/activiti.h2.create.identity.sql
INFO  [ProcessEngineImpl]  [] - ProcessEngine default created
INFO  [AbstractAsyncJobExecutor]  [] - Starting up the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [DefaultAsyncJobExecutor]  [] - Creating thread pool queue of size 100
INFO  [DefaultAsyncJobExecutor]  [] - Creating executor service with corePoolSize 2, maxPoolSize 10 and keepAliveTime 5000
INFO  [AcquireTimerJobsRunnable]  [] - starting to acquire async jobs due
INFO  [AcquireAsyncJobsDueRunnable]  [] - starting to acquire async jobs due
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/invoice_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_sales.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/receipt_engineering.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_bad_namespace.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_engineering.bpmn20.xml
INFO  [DemoDataGenerator]  [] - Initializing demo groups
INFO  [DemoDataGenerator]  [] - Initializing demo users
DEBUG [SpringContextListener]  [] - **********************REFRESHED Context [org.springframework.context.support.GenericApplicationContext@6e17db0a] of parent [null] ***********************************
INFO  [SpringContextListener]  [] - AppContext org.springframework.context.support.GenericApplicationContext@6e17db0a: beans(39)
DEBUG [SpringContextListener]  [] - ******
DEBUG [WorkflowBuilderTest]  [] - image copied to /tmp/tmpgr5wm09n/activiti-example/target/generated_ping_test_2_tasks.png
INFO  [WorkflowBuilder]  [] - Creating new workflow for docType UNIT_TEST_NO_EXIST and group: sales
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=UNIT_TEST_NO_EXIST.
INFO  [WorkflowService]  [] - search for base doc workflow using processId=UNIT_TEST_NO_EXIST___NONE
INFO  [WorkflowBuilder]  [] - Creating new workflow for docType BOOK_REPORT and group: engineering
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT.
INFO  [WorkflowService]  [] - search for base doc workflow using processId=BOOK_REPORT___NONE
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=engineering
INFO  [WorkflowBuilder]  [] - Creating new workflow for docType BOOK_REPORT and group: foo
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT.
INFO  [WorkflowService]  [] - search for base doc workflow using processId=BOOK_REPORT___NONE
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=foo
DEBUG [WorkflowService]  [] - Checking for base workflow exists of doctype=BOOK_REPORT
INFO  [BpmnDeployer]  [] - Processing resource BOOK_REPORT___foo.bpmn
DEBUG [WorkflowService]  [] - Checking for workflow exists of doctype=BOOK_REPORT and group=foo
DEBUG [WorkflowBuilderTest]  [] - BOOK_REPORT___foo
DEBUG [WorkflowBuilderTest]  [] - Images generated to target/testCreateGroupWorkflow.png
INFO  [AbstractApplicationContext]  [] - Closing org.springframework.context.support.GenericApplicationContext@6e17db0a: startup date [Thu Jul 30 20:43:51 UTC 2020]; root of context hierarchy
INFO  [AbstractAsyncJobExecutor]  [] - Shutting down the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [AcquireAsyncJobsDueRunnable]  [] - stopped async job due acquisition
INFO  [AcquireTimerJobsRunnable]  [] - stopped async job due acquisition
INFO  [EmbeddedDatabaseFactory]  [] - Shutting down embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/testAppContext.xml]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/activiti-config.xml]
INFO  [AbstractApplicationContext]  [] - Refreshing org.springframework.context.support.GenericApplicationContext@2cac00e0: startup date [Thu Jul 30 20:43:53 UTC 2020]; root of context hierarchy
INFO  [EmbeddedDatabaseFactory]  [] - Starting embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
INFO  [ScriptUtils]  [] - Executing SQL script from class path resource [db/h2/activiti.h2.create.extra.sql]
INFO  [ScriptUtils]  [] - Executed SQL script from class path resource [db/h2/activiti.h2.create.extra.sql] in 3 ms.
INFO  [DbSqlSession]  [] - performing create on engine with resource org/activiti/db/create/activiti.h2.create.engine.sql
INFO  [DbSqlSession]  [] - performing create on history with resource org/activiti/db/create/activiti.h2.create.history.sql
INFO  [DbSqlSession]  [] - performing create on identity with resource org/activiti/db/create/activiti.h2.create.identity.sql
INFO  [ProcessEngineImpl]  [] - ProcessEngine default created
INFO  [AbstractAsyncJobExecutor]  [] - Starting up the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [DefaultAsyncJobExecutor]  [] - Creating thread pool queue of size 100
INFO  [DefaultAsyncJobExecutor]  [] - Creating executor service with corePoolSize 2, maxPoolSize 10 and keepAliveTime 5000
INFO  [AcquireTimerJobsRunnable]  [] - starting to acquire async jobs due
INFO  [AcquireAsyncJobsDueRunnable]  [] - starting to acquire async jobs due
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/invoice_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_sales.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/receipt_engineering.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_bad_namespace.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_engineering.bpmn20.xml
INFO  [DemoDataGenerator]  [] - Initializing demo groups
INFO  [DemoDataGenerator]  [] - Initializing demo users
DEBUG [SpringContextListener]  [] - **********************REFRESHED Context [org.springframework.context.support.GenericApplicationContext@2cac00e0] of parent [null] ***********************************
INFO  [SpringContextListener]  [] - AppContext org.springframework.context.support.GenericApplicationContext@2cac00e0: beans(39)
DEBUG [SpringContextListener]  [] - ******
DEBUG [WorkflowBuilder]  [] - returning dynamic tasks for procDef: BOOK_REPORT___engineering
DEBUG [WorkflowBuilder]  [] - Adding task: COLLABORATE_DOC_USER_TASK_1 at index: 0
DEBUG [WorkflowBuilder]  [] - Adding task: COLLABORATE_DOC_USER_TASK_2 at index: 1
DEBUG [WorkflowBuilder]  [] - Adding task: APPROVE_REJECT_DOC_USER_TASK_1 at index: 2
DEBUG [WorkflowBuilder]  [] - Adding task: APPROVE_REJECT_DOC_USER_TASK_2 at index: 3
DEBUG [WorkflowBuilderTest]  [] - 4
INFO  [AbstractApplicationContext]  [] - Closing org.springframework.context.support.GenericApplicationContext@2cac00e0: startup date [Thu Jul 30 20:43:53 UTC 2020]; root of context hierarchy
INFO  [AbstractAsyncJobExecutor]  [] - Shutting down the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [AcquireTimerJobsRunnable]  [] - stopped async job due acquisition
INFO  [AcquireAsyncJobsDueRunnable]  [] - stopped async job due acquisition
INFO  [EmbeddedDatabaseFactory]  [] - Shutting down embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'
Tests run: 7, Failures: 0, Errors: 1, Skipped: 1, Time elapsed: 2.796 sec <<< FAILURE! - in com.studerw.activiti.build.WorkflowBuilderTest
testUpdateDynamicTasks(com.studerw.activiti.build.WorkflowBuilderTest)  Time elapsed: 0.245 sec  <<< ERROR!
java.lang.NullPointerException
	at com.studerw.activiti.build.WorkflowBuilderTest.testUpdateDynamicTasks(WorkflowBuilderTest.java:125)

Running com.studerw.activiti.build.SimpleWorkflowTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1304e6ac, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7f5b59ed, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@47f8be58, org.springframework.test.context.support.DirtiesContextTestExecutionListener@85b79b0, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3c5ecf91, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@19ef6dc6]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/testAppContext.xml]
INFO  [XmlBeanDefinitionReader]  [] - Loading XML bean definitions from class path resource [spring/activiti-config.xml]
INFO  [AbstractApplicationContext]  [] - Refreshing org.springframework.context.support.GenericApplicationContext@1be71add: startup date [Thu Jul 30 20:43:54 UTC 2020]; root of context hierarchy
INFO  [EmbeddedDatabaseFactory]  [] - Starting embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
INFO  [ScriptUtils]  [] - Executing SQL script from class path resource [db/h2/activiti.h2.create.extra.sql]
INFO  [ScriptUtils]  [] - Executed SQL script from class path resource [db/h2/activiti.h2.create.extra.sql] in 16 ms.
INFO  [DbSqlSession]  [] - performing create on engine with resource org/activiti/db/create/activiti.h2.create.engine.sql
INFO  [DbSqlSession]  [] - performing create on history with resource org/activiti/db/create/activiti.h2.create.history.sql
INFO  [DbSqlSession]  [] - performing create on identity with resource org/activiti/db/create/activiti.h2.create.identity.sql
INFO  [ProcessEngineImpl]  [] - ProcessEngine default created
INFO  [AbstractAsyncJobExecutor]  [] - Starting up the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [DefaultAsyncJobExecutor]  [] - Creating thread pool queue of size 100
INFO  [DefaultAsyncJobExecutor]  [] - Creating executor service with corePoolSize 2, maxPoolSize 10 and keepAliveTime 5000
INFO  [AcquireTimerJobsRunnable]  [] - starting to acquire async jobs due
INFO  [AcquireAsyncJobsDueRunnable]  [] - starting to acquire async jobs due
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/invoice_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_sales.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/receipt_engineering.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_general.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_bad_namespace.bpmn20.xml
INFO  [BpmnDeployer]  [] - Processing resource /tmp/tmpgr5wm09n/activiti-example/target/test-classes/bpmn-test/book_report_engineering.bpmn20.xml
INFO  [DemoDataGenerator]  [] - Initializing demo groups
INFO  [DemoDataGenerator]  [] - Initializing demo users
DEBUG [SpringContextListener]  [] - **********************REFRESHED Context [org.springframework.context.support.GenericApplicationContext@1be71add] of parent [null] ***********************************
INFO  [SpringContextListener]  [] - AppContext org.springframework.context.support.GenericApplicationContext@1be71add: beans(39)
DEBUG [SpringContextListener]  [] - ******
INFO  [BpmnDeployer]  [] - Processing resource dynamic-model.bpmn
INFO  [BpmnDeployer]  [] - Processing resource dynamic-model.bpmn
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.173 sec - in com.studerw.activiti.build.SimpleWorkflowTest
Running com.studerw.activiti.build.DocApproveTest
INFO  [AbstractTestContextBootstrapper]  [] - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
INFO  [AbstractTestContextBootstrapper]  [] - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@611b56c1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@12362170, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@35375828, org.springframework.test.context.support.DirtiesContextTestExecutionListener@203d6ee0, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1bab9978, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@38b506dc]
INFO  [BpmnDeployer]  [] - Processing resource dynamic-model.bpmn
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.139 sec - in com.studerw.activiti.build.DocApproveTest
INFO  [AbstractApplicationContext]  [] - Closing org.springframework.context.support.GenericApplicationContext@1be71add: startup date [Thu Jul 30 20:43:54 UTC 2020]; root of context hierarchy
INFO  [AbstractAsyncJobExecutor]  [] - Shutting down the default async job executor [org.activiti.engine.impl.asyncexecutor.DefaultAsyncJobExecutor].
INFO  [AcquireTimerJobsRunnable]  [] - stopped async job due acquisition
INFO  [AcquireAsyncJobsDueRunnable]  [] - stopped async job due acquisition
INFO  [EmbeddedDatabaseFactory]  [] - Shutting down embedded database: url='jdbc:h2:mem:dataSource;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false'

Results :

Tests in error: 
  IdentityServiceTest.testUsers:46  Persistence 
### Error updating database.  ...
  WorkflowBuilderTest.testUpdateDynamicTasks:125  NullPointer

Tests run: 41, Failures: 0, Errors: 2, Skipped: 9

[ERROR] There are test failures.

Please refer to /tmp/tmpgr5wm09n/activiti-example/target/surefire-reports for the individual test results.
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.5:report (report) @ activiti-example ---
[INFO] Loading execution data file /tmp/tmpgr5wm09n/activiti-example/target/jacoco.exec
[INFO] Analyzed bundle 'activiti-example' with 304 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  37.283 s
[INFO] Finished at: 2020-07-30T20:43:58Z
[INFO] ------------------------------------------------------------------------
